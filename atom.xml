<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Carlog</title>
  <subtitle>Where Haishan Write</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.hanhaishan.com/"/>
  <updated>2016-07-10T15:12:01.000Z</updated>
  <id>http://blog.hanhaishan.com/</id>
  
  <author>
    <name>haishanh</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>更美观的serve静态文件</title>
    <link href="http://blog.hanhaishan.com/2016/serve-index/"/>
    <id>http://blog.hanhaishan.com/2016/serve-index/</id>
    <published>2016-06-13T16:00:00.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;With-nginx&quot;&gt;&lt;a href=&quot;#With-nginx&quot; class=&quot;headerlink&quot; title=&quot;With nginx&quot;&gt;&lt;/a&gt;With nginx&lt;/h2&gt;&lt;p&gt;用 ningx 来 serving 静态文件，一般是这样配置的:&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;location&lt;/span&gt; /static &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;root&lt;/span&gt; /opt/static;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;autoindex&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;It works, but it’s not pretty and unable to customize.&lt;/p&gt;
&lt;h2 id=&quot;Using-express-and-serve-index&quot;&gt;&lt;a href=&quot;#Using-express-and-serve-index&quot; class=&quot;headerlink&quot; title=&quot;Using express and serve-index&quot;&gt;&lt;/a&gt;Using express and serve-index&lt;/h2&gt;&lt;p&gt;为了更美观，可以使用 &lt;em&gt;nginx&lt;/em&gt; + &lt;em&gt;express&lt;/em&gt; + &lt;em&gt;serve-index&lt;/em&gt;。 nginx 在这里用来 serving 静态文件本身，而 express + serve-index 只用来 serving 目录的 index 页面。需要说明的是，在这里 express 并不是必须的，也可以使用 Node 自带的 http server，这里使用 express 只是为了方便。&lt;/p&gt;
&lt;p&gt;当然你首先要安装好 express 和 serve-index, 然后这样使用：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/home/haishanh/.nvm/versions/node/v5.6.0/bin/node&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; express = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;express&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; serveIndex = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;serve-index&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; app = express();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; serveOpt = &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  icons: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  view: &lt;span class=&quot;string&quot;&gt;&#39;details&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;app.use(&lt;span class=&quot;string&quot;&gt;&#39;/static&#39;&lt;/span&gt;, serveIndex(&lt;span class=&quot;string&quot;&gt;&#39;/opt/static&#39;&lt;/span&gt;, serveOpt));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;app.listen(&lt;span class=&quot;number&quot;&gt;8001&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这段内容表示 express + serve-index 会 hosting 目录 &lt;code&gt;/opt/static&lt;/code&gt;，使用的url路径为&lt;code&gt;/static&lt;/code&gt;。假设以上内容保存为文件&lt;code&gt;serve.js&lt;/code&gt;。给这个文件可执行权限，&lt;code&gt;chmod +x serve.js&lt;/code&gt;，要注意脚本最开头的 &lt;em&gt;shebang&lt;/em&gt; 要指定好，尤其是当你和我一样是用 nvm 来管理 node 版本的时候。&lt;/p&gt;
&lt;p&gt;停止 nginx，只运行以上脚本，访问 &lt;code&gt;http://localhost:8001/static/&lt;/code&gt; 就可以看到目录 &lt;code&gt;/opt/static&lt;/code&gt; 中的内容了，界面也很美观。需要注意的是，此时文件本身并没有被 serve，仍然需要使用 nginx 来 serve 文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/serve-index.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;修改 nginx 的配置:&lt;/p&gt;
&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;= /static&lt;/span&gt;/ &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    proxy_pass http://localhost:&lt;span class=&quot;number&quot;&gt;8001&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;/static&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    root /opt/static;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行 &lt;code&gt;server.js&lt;/code&gt;，并 start/reload nginx。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;/path/to/serve.js&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;nginx &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; reload&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;试试访问 &lt;code&gt;http://localhost/static/&lt;/code&gt;，其中的文件也应该正常被 serve 了。如果你希望 &lt;code&gt;/opt/static&lt;/code&gt; 下的所有目录都有 index 页面的话，前面 nginx 配置中的第一个 location 可以改成这样的：&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;regexp&quot;&gt;~ ^/static.*/$&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;proxy_pass&lt;/span&gt; http://localhost:8001;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Supervise-Monitor&quot;&gt;&lt;a href=&quot;#Supervise-Monitor&quot; class=&quot;headerlink&quot; title=&quot;Supervise / Monitor&quot;&gt;&lt;/a&gt;Supervise / Monitor&lt;/h2&gt;&lt;p&gt;为了防止 server.js 在运行的过程中意外退出，可以用 &lt;em&gt;pm2&lt;/em&gt; 管理一下。当然我们首先要全局安装一下 pm2:&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install pm2 -g&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后就可以用 pm2 来启动 serve.js 了:&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;pm2 start /path/to/serve.js --name &lt;span class=&quot;string&quot;&gt;&quot;serve-index&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;可以用 &lt;code&gt;pm2 list&lt;/code&gt; 来查看当前 pm2 管理的进程情况。更多命令和用法可以看看&lt;a href=&quot;http://pm2.keymetrics.io/docs/usage/quick-start/#cheatsheet&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PM2 cheatsheet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果需要开机启动，可以运行以下命令，&lt;code&gt;pm2&lt;/code&gt;会自动判断操作系统/平台信息，&lt;a href=&quot;http://pm2.keymetrics.io/docs/usage/startup/#startup-systems-support&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;相应的进行startup配置&lt;/a&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo pm2 startup&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果不能识别平台信息，可以尝试手动指定一下，比如我是用的 &lt;code&gt;systemd&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo pm2 startup systemd&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;pm2&lt;/code&gt;会自动生成&lt;code&gt;systemd&lt;/code&gt; service 配置文件，并enable这个service，一般这个文件的路径是 &lt;code&gt;/etc/systemd/system/pm2.service&lt;/code&gt;。这个服务在 stop 的时候会 dump 当前 pm2 monitor的程序信息，start的时候再 load 这些信息。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;With-nginx&quot;&gt;&lt;a href=&quot;#With-nginx&quot; class=&quot;headerlink&quot; title=&quot;With nginx&quot;&gt;&lt;/a&gt;With nginx&lt;/h2&gt;&lt;p&gt;用 ningx 来 serving 静态文件，一般是这样配置的:&lt;/p&gt;
&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GCC code coverage小例子</title>
    <link href="http://blog.hanhaishan.com/2015/gcc-code-coverage/"/>
    <id>http://blog.hanhaishan.com/2015/gcc-code-coverage/</id>
    <published>2015-11-21T13:29:40.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;有同事问我code coverage的问题，但其实这方面我毛都不懂。所以我也去学习了一下。&lt;/p&gt;
&lt;p&gt;Code coverage其实就是去检查我们的测试case是不是把我们的代码都覆盖到了。如果要进行code coverage，release版本是binary不行的，必须要用编译出带有coverage instrumentation的binary。要进行code coverage，大概的步骤是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编译出可以用于coverage的binary&lt;/li&gt;
&lt;li&gt;跑test case&lt;/li&gt;
&lt;li&gt;收集coverage信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我自己写了个小例子，源码可以在&lt;a href=&quot;https://github.com/haishanh/gcc-code-coverage-example&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。我们可以按照这个例子，去执行上面的步骤。首先你的机器上需要安装有&lt;a href=&quot;https://www.gnu.org/software/make/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;make&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://gcc.gnu.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;gcc&lt;/code&gt;&lt;/a&gt;以及&lt;a href=&quot;http://ltp.sourceforge.net/coverage/lcov.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;lcov&lt;/code&gt;&lt;/a&gt;，gcov是gcc中用于测试code coverage的工具，而lcov是对gcov的一个扩展。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;因为在有些项目中，我们除了编译出可执行文件外，还可能需要编译出一些库文件供别人使用。下载例子之后，我们首先进入&lt;strong&gt;cov&lt;/strong&gt;目录。其中&lt;code&gt;hello.c&lt;/code&gt;包含函数&lt;code&gt;say_hello()&lt;/code&gt;，编译成&lt;code&gt;libhello.so&lt;/code&gt;。&lt;code&gt;bye.c&lt;/code&gt;包含函数&lt;code&gt;say_bye()&lt;/code&gt;，编译成&lt;code&gt;libbye.so&lt;/code&gt;。&lt;code&gt;main.c&lt;/code&gt;中会根据不同的输入参数调用&lt;code&gt;say_hello()&lt;/code&gt;或&lt;code&gt;say_bye()&lt;/code&gt;。最终编译出可执行文件&lt;code&gt;say&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;编译&quot;&gt;&lt;a href=&quot;#编译&quot; class=&quot;headerlink&quot; title=&quot;编译&quot;&gt;&lt;/a&gt;编译&lt;/h3&gt;&lt;p&gt;运行&lt;code&gt;make&lt;/code&gt;就可以编译出这些库文件和可执行文件。&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ ls  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye.c  hello.c  main.c  Makefile  say.h&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ make&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;......&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ ls&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye.c  bye.o  hello.c  hello.o  libbye.so  libhello.so  main.c  Makefile  say  say.h&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ ls -lh say lib*.so&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x 1 vagrant vagrant 6.2K Nov 22 01:24 libbye.so&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x 1 vagrant vagrant 6.2K Nov 22 01:24 libhello.so&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x 1 vagrant vagrant 7.3K Nov 22 01:24 say&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果我们运行&lt;code&gt;make coverage&lt;/code&gt;可以编译出可用于coverage测试的库和可执行文件。&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ make coverage&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;......&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ ls&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;     bye&lt;span class=&quot;selector-class&quot;&gt;.o&lt;/span&gt;    hello&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  libbye&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;    main&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;     Makefile  say&lt;span class=&quot;selector-class&quot;&gt;.h&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  hello&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;  hello&lt;span class=&quot;selector-class&quot;&gt;.o&lt;/span&gt;     libhello&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;  main&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  say&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ ls -lh say lib*&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; vagrant vagrant &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;K Nov &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;01&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;25&lt;/span&gt; libbye&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; vagrant vagrant &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;K Nov &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;01&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;25&lt;/span&gt; libhello&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-rwxr-xr-x &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; vagrant vagrant &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;K Nov &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;01&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;25&lt;/span&gt; say&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;首先我们可以看到，相比没有使用coverage选项，多出了几个&lt;code&gt;.gcno&lt;/code&gt;文件，库和可执行文件的大小也比之前大出许多。&lt;/p&gt;
&lt;p&gt;这是因为我们在&lt;code&gt;make coverage&lt;/code&gt;时，gcc的编译和链接过程都加入了&lt;code&gt;-coverage&lt;/code&gt;选项。对于gcc，在编译阶段使用&lt;code&gt;-coverage&lt;/code&gt;选项相当于使用&lt;code&gt;-fprofile-arcs -ftest-coverage&lt;/code&gt;，在链接时使用&lt;code&gt;-coverage&lt;/code&gt;选项相当于使用了&lt;code&gt;-lgov&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h3&gt;&lt;p&gt;之后我们便可以进行测试&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; LD_LIBRARY_PATH=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;PWD&amp;#125;&lt;/span&gt;:&lt;span class=&quot;variable&quot;&gt;$&amp;#123;LD_LIBRARY_PATH&amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./say h&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中第一步，是为了让&lt;code&gt;say&lt;/code&gt;在运行时可以找到&lt;code&gt;libhello.so&lt;/code&gt;和&lt;code&gt;libbye.so&lt;/code&gt;这两个库。第二步就是我们的测试步骤，其中&lt;code&gt;h&lt;/code&gt;参数，可以让我们只调用&lt;code&gt;say_hello()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;此时，我们会发现我们的目录里，又多出了几个&lt;code&gt;.gcda&lt;/code&gt;文件。这些文件就是生成的coverage信息文件。&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ ls&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;     bye&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  hello&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;     hello&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  libbye&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;    main&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;     main&lt;span class=&quot;selector-class&quot;&gt;.gcno&lt;/span&gt;  say&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;bye&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;  bye&lt;span class=&quot;selector-class&quot;&gt;.o&lt;/span&gt;     hello&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;  hello&lt;span class=&quot;selector-class&quot;&gt;.o&lt;/span&gt;     libhello&lt;span class=&quot;selector-class&quot;&gt;.so&lt;/span&gt;  main&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;  Makefile   say.h&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;收集coverage信息&quot;&gt;&lt;a href=&quot;#收集coverage信息&quot; class=&quot;headerlink&quot; title=&quot;收集coverage信息&quot;&gt;&lt;/a&gt;收集coverage信息&lt;/h3&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ lcov -c -d ./ -o coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Capturing coverage data from ./&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Found gcov version: &lt;span class=&quot;number&quot;&gt;5.2&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Scanning ./ &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt; files ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Found &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; data files &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ./&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing main&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing bye&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing hello&lt;span class=&quot;selector-class&quot;&gt;.gcda&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Finished &lt;span class=&quot;selector-class&quot;&gt;.info-file&lt;/span&gt; creation&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ lcov --remove coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/usr*&quot;&lt;/span&gt; -o coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Reading tracefile coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Deleted &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; files&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Writing data to coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Summary coverage rate:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  lines......: &lt;span class=&quot;number&quot;&gt;53.3%&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; of &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; lines)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  functions..: &lt;span class=&quot;number&quot;&gt;66.7%&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; of &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; functions)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  branches...: no data found&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ genhtml coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt; -o coverage&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Reading data file coverage&lt;span class=&quot;selector-class&quot;&gt;.info&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Found &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; entries.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Found common filename prefix &lt;span class=&quot;string&quot;&gt;&quot;/home/vagrant/coverage-exapmle/coverage&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Writing &lt;span class=&quot;selector-class&quot;&gt;.css&lt;/span&gt; and &lt;span class=&quot;selector-class&quot;&gt;.png&lt;/span&gt; files.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Generating output.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing file cov/bye&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing file cov/main&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Processing file cov/hello&lt;span class=&quot;selector-class&quot;&gt;.c&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Writing directory view page.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Overall coverage rate:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  lines......: &lt;span class=&quot;number&quot;&gt;53.3%&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; of &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; lines)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  functions..: &lt;span class=&quot;number&quot;&gt;66.7%&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; of &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; functions)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一步，使用&lt;code&gt;lcov&lt;/code&gt;生成&lt;code&gt;coverage.ino&lt;/code&gt;文件。第二步，我们是去除掉系统的源码调用记录，比如&lt;code&gt;stdio.h&lt;/code&gt;什么的。第三步是在coverage目录中生成html格式的报告。此时我们进入coverage，运行&lt;code&gt;python -m SimpleHTTPServer&lt;/code&gt;就可以通过浏览器访问本机的8000端口来查看coverage报告了。&lt;/p&gt;
&lt;p&gt;从上面的输出，我们可以看到，我们的测试覆盖到了源代码中53.3%行，和66.7%的函数。假设我们把测试步骤中的&lt;code&gt;./say h&lt;/code&gt;改成&lt;code&gt;./say&lt;/code&gt;，会发现函数的覆盖率变成了100%。&lt;/p&gt;
&lt;h3 id=&quot;自动化&quot;&gt;&lt;a href=&quot;#自动化&quot; class=&quot;headerlink&quot; title=&quot;自动化&quot;&gt;&lt;/a&gt;自动化&lt;/h3&gt;&lt;p&gt;在生产环境中，我们通常可以把上面的两个步骤自动化。我们可以把测试的运行写成脚本，然后在Makefile中调用该脚本，再收集coverage信息。进入&lt;strong&gt;auto&lt;/strong&gt;目录，运行&lt;code&gt;make coverage&lt;/code&gt;你就能明白了。&lt;/p&gt;
&lt;p&gt;Ref: &lt;a href=&quot;http://ernstsson.net/post/23930158749/code-coverage-for-c-using-gcc-and-lcov&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Code coverage for C using gcc and lcov&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;有同事问我code coverage的问题，但其实这方面我毛都不懂。所以我也去学习了一下。&lt;/p&gt;
&lt;p&gt;Code coverage其实就是去检查我们的测试case是不是把我们的代码都覆盖到了。如果要进行code coverage，release版本是binary不行的，必须要用编译出带有coverage instrumentation的binary。要进行code coverage，大概的步骤是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编译出可以用于coverage的binary&lt;/li&gt;
&lt;li&gt;跑test case&lt;/li&gt;
&lt;li&gt;收集coverage信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我自己写了个小例子，源码可以在&lt;a href=&quot;https://github.com/haishanh/gcc-code-coverage-example&quot;&gt;这里&lt;/a&gt;。我们可以按照这个例子，去执行上面的步骤。首先你的机器上需要安装有&lt;a href=&quot;https://www.gnu.org/software/make/&quot;&gt;&lt;code&gt;make&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://gcc.gnu.org/&quot;&gt;&lt;code&gt;gcc&lt;/code&gt;&lt;/a&gt;以及&lt;a href=&quot;http://ltp.sourceforge.net/coverage/lcov.php&quot;&gt;&lt;code&gt;lcov&lt;/code&gt;&lt;/a&gt;，gcov是gcc中用于测试code coverage的工具，而lcov是对gcov的一个扩展。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>自己搞一个Yum源</title>
    <link href="http://blog.hanhaishan.com/2015/yum-repo-howto/"/>
    <id>http://blog.hanhaishan.com/2015/yum-repo-howto/</id>
    <published>2015-11-06T15:21:47.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;/2015/build-and-install-from-source-with-out-root/&quot;&gt;无root权限从源码编译安装很痛苦&lt;/a&gt;，就算有root权限安装个软件什么的也很麻烦。而且公司的机器又不能访问外网。所以我不如自己搭建一个源镜像，这样大家都可以用。正好实验室有配置比较低的闲置机器，配置一下代理就可以了。由于我们Team基本用的都是Redhat Enterprise Linux或者Cent OS，而且基本上都是7.0+，所以搭建的是EL7的yum源，应该也可以用于其他Enterprise Linux系列distro。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;首先检查机器上是否有&lt;code&gt;reposync&lt;/code&gt;和&lt;code&gt;createrepo&lt;/code&gt;。前者用于从远端repo中拉取rpm包到本地，后者用于创建repo生产metadata等。没有的话，可以通过yum安装。&lt;/p&gt;
&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;yum &lt;span class=&quot;keyword&quot;&gt;install&lt;/span&gt; yum-utils createrepo&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后可以写一个，如下的脚本：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;repos=&lt;span class=&quot;string&quot;&gt;&quot;base extras updates&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; repo &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$repos&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  reposync &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; x86_64 -r &lt;span class=&quot;variable&quot;&gt;$repo&lt;/span&gt; -p /opt/mirror/el/7/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  createrepo &lt;span class=&quot;string&quot;&gt;&quot;/opt/mirror/el/7/&lt;span class=&quot;variable&quot;&gt;$repo&lt;/span&gt;/&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中&lt;code&gt;repos&lt;/code&gt;中是你希望拉取到本地的repo的id。在&lt;code&gt;/etc/yum.repos.d/&lt;/code&gt;下面的repo文件一般都是如下的形式：&lt;/p&gt;
&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[one]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Repo &lt;span class=&quot;literal&quot;&gt;On&lt;/span&gt;e&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://example.com/el7/&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;e/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgkey&lt;/span&gt;=file:///etc/&lt;span class=&quot;literal&quot;&gt;on&lt;/span&gt;e/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[two]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Repo Two&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://example.com/el7/two/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中&lt;code&gt;one&lt;/code&gt;和&lt;code&gt;two&lt;/code&gt;就是repo id。虽然说是id，但其实可以有多个文件存在相同的repo id。&lt;/p&gt;
&lt;p&gt;前面的脚本跑一次一般需要比较长的时间，当然这个要看网络情况。接下来，我们跑一个web server，这里选择nginx。使用yum默认安装的话，nginx使用的默认配置文件应该是&lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;，添加以下行：&lt;/p&gt;
&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;http &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    server &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        location /el/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;/ &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        root   /opt/mirror;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        autoindex  &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行nginx&lt;/p&gt;
&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;literal&quot;&gt;start&lt;/span&gt; nginx&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;假设主机的IP是1.2.3.4，此时我们访问&lt;code&gt;http://1.2.3.4/el/7/&lt;/code&gt;就应该能看到东西了。&lt;/p&gt;
&lt;p&gt;我们提供给别人的repo文件，应该是这样：&lt;/p&gt;
&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[base]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Test Repo base&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;3.4&lt;/span&gt;/el/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;/base/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[extras]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Test Repo extras&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;3.4&lt;/span&gt;/el/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;/extras/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;[updates]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=Test Repo updates&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;baseurl&lt;/span&gt;=http://&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;3.4&lt;/span&gt;/el/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;/updates/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enabled&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;gpgcheck&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我只是公司内网使用，就不管什么gpgkey了。gpgcheck全设为0。&lt;/p&gt;
&lt;p&gt;如果我们还有点&lt;em&gt;情怀&lt;/em&gt;，我们还应该提供一个mirror使用的帮助页面，比如&lt;a href=&quot;http://mirrors.163.com/.help/centos.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;网易CentOS镜像使用帮助&lt;/a&gt;。用markdown写个，转成html，存到&lt;code&gt;/opt/mirror/el/7/help/index.html&lt;/code&gt;就可以了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;/2015/build-and-install-from-source-with-out-root/&quot;&gt;无root权限从源码编译安装很痛苦&lt;/a&gt;，就算有root权限安装个软件什么的也很麻烦。而且公司的机器又不能访问外网。所以我不如自己搭建一个源镜像，这样大家都可以用。正好实验室有配置比较低的闲置机器，配置一下代理就可以了。由于我们Team基本用的都是Redhat Enterprise Linux或者Cent OS，而且基本上都是7.0+，所以搭建的是EL7的yum源，应该也可以用于其他Enterprise Linux系列distro。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Network namespace挺有趣</title>
    <link href="http://blog.hanhaishan.com/2015/linux-network-namespace/"/>
    <id>http://blog.hanhaishan.com/2015/linux-network-namespace/</id>
    <published>2015-11-03T13:57:14.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;今天才发现&lt;code&gt;ip netns&lt;/code&gt;是这么强大。&lt;code&gt;ip netns&lt;/code&gt;操作的就是Linux network namespace。&lt;/p&gt;
&lt;p&gt;namespaces, cgroups这些技术是Linux LXC的基础，所以也是现在流行的Docker的基础。对于namespeces，有process的namespace，也有network的namespace。如果一个进程跑在一个process namespace中，那么它只能看到同在这个namespace中的进程，也只能和这些进程通信。你在这个namespace中&lt;code&gt;ps -elf&lt;/code&gt;一下，你也只能看到跑在这个namespace的进程。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;Linux的network namespace也是一样的道理，只是它是用于隔离网络。每个network namespace中有独立的网络设备，有自己独立的&lt;code&gt;lo&lt;/code&gt;。每个network namespace中也有自己独立的路由表，iptables规则等。结合veth，利用network namespace可以很方便的在主机配置虚拟网络。具体什么是network namespace可以&lt;a href=&quot;http://man7.org/linux/man-pages/man8/ip-netns.8.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;man 8 ip-netns&lt;/a&gt;看看。&lt;/p&gt;
&lt;h2 id=&quot;A-simple-example&quot;&gt;&lt;a href=&quot;#A-simple-example&quot; class=&quot;headerlink&quot; title=&quot;A simple example&quot;&gt;&lt;/a&gt;A simple example&lt;/h2&gt;&lt;p&gt;为了方便,我们不使用Linux bridge或者OVS，只在主机中配置一个点到点的简单网络。&lt;/p&gt;
&lt;p&gt;首先创建2个namespace&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; ns1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; ns2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此时&lt;code&gt;ls /var/run/netns&lt;/code&gt;会看到2个文件&lt;code&gt;ns1&lt;/code&gt;和&lt;code&gt;ns2&lt;/code&gt;。这2个文件打开后产生的fd指向对应的namespace。&lt;/p&gt;
&lt;p&gt;创建veth &lt;strong&gt;pair&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight fortran&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ip link add &lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; tap1 &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt; veth peer &lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; tap2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这时，在主机上就会多出2个interface tap1和tap2。然后把这2个interface分别加到ns1和ns2中&lt;/p&gt;
&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ip &lt;span class=&quot;keyword&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; tap1 netns ns1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ip &lt;span class=&quot;keyword&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; tap2 netns ns2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这时，主机上原来多出的2个interface又会消失。此后，如果我们要操作这些interface的话，必须要加上&lt;code&gt;ip netns exec &amp;lt;ns-id&amp;gt;&lt;/code&gt;前缀，比如现在把这2个interface配上地址并起起来。&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec ns1 &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; addr &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2.2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.1&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt; dev tap1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec ns1 &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; link set tap1 &lt;span class=&quot;meta&quot;&gt;up&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec ns2 &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; addr &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2.2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.2&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt; dev tap2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec ns2 &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; link set tap2 &lt;span class=&quot;meta&quot;&gt;up&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个时候，你就可以尝试 &lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;ip&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;netns&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;ns1&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;ping&lt;/span&gt; 2&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;没有意外的，应该是可以ping通的。你也可以在ns2的对应interface上抓包&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ip netns exec ns2 tcpdump -&lt;span class=&quot;selector-tag&quot;&gt;i&lt;/span&gt; tap2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果你觉得输入前面的&lt;code&gt;ip netns exec &amp;lt;ns-id&amp;gt;&lt;/code&gt;很麻烦，你也可以在这个namespace中运行xterm。当然这需要你通过GUI登录机器，或者进行x-window转发。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ip netns &lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt; ns1 xterm &amp;amp;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的命令会打开一个新的terminal。&lt;code&gt;ip link list&lt;/code&gt;一下，你应该就能看到&lt;code&gt;lo&lt;/code&gt;和&lt;code&gt;tap1&lt;/code&gt;了。&lt;/p&gt;
&lt;h2 id=&quot;How-pipework-works-with-Docker-containter&quot;&gt;&lt;a href=&quot;#How-pipework-works-with-Docker-containter&quot; class=&quot;headerlink&quot; title=&quot;How pipework works with Docker containter&quot;&gt;&lt;/a&gt;How pipework works with Docker containter&lt;/h2&gt;&lt;p&gt;如果你尝试过让Docker container和外部通信，你可能用过&lt;a href=&quot;https://github.com/jpetazzo/pipework&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jpetazzo/pipework&lt;/a&gt;。pipework是一个简单的用来给LXC container配置网络的Bash脚本。&lt;/p&gt;
&lt;p&gt;pipework使用起来通常是这样(当然还有很多其他用法)：&lt;/p&gt;
&lt;figure class=&quot;highlight lsl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;pipework br0 &lt;span class=&quot;number&quot;&gt;904&lt;/span&gt;bcf846a3e &lt;span class=&quot;number&quot;&gt;10.10&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.10&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.9&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中&lt;code&gt;br0&lt;/code&gt;是bridge名，&lt;code&gt;904bcf846a3e&lt;/code&gt;是container id，&lt;code&gt;10.10.10.9/24&lt;/code&gt;会配到这个container中新创建的interface eth0上。然后你把主机上的物理interface加到这个&lt;code&gt;br0&lt;/code&gt;中，这个container就可以和外部网络通信了。pipework用的其实就是上面例子中的那些工具。&lt;/p&gt;
&lt;p&gt;pipework首先会根据第一参数，在此是&lt;code&gt;br0&lt;/code&gt;，去检查主机上有没有这个bridge，如果有的话，会判断是Linux bridge还是OVS bridge。如果主机上不存在，pipework会创建这个bridge，pipework也会根据这个参数去猜测用户是想创建Linux bridge还是OVS bridge。&lt;/p&gt;
&lt;p&gt;然后pipework会根据这个container id获得这个container的pid。假设这个pid是&lt;code&gt;14806&lt;/code&gt;，则&lt;code&gt;/proc/14806/ns/net&lt;/code&gt;就是这个container真正的network namespace文件对象。pipework会在/var/run/netns/下创建一个指向这个文件的软链接。&lt;/p&gt;
&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ln -s &lt;span class=&quot;meta-keyword&quot;&gt;/proc/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;14806&lt;/span&gt;&lt;span class=&quot;meta-keyword&quot;&gt;/ns/&lt;/span&gt;net &lt;span class=&quot;meta-keyword&quot;&gt;/var/&lt;/span&gt;run&lt;span class=&quot;meta-keyword&quot;&gt;/netns/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;14806&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此时我们运行&lt;code&gt;ip netns list&lt;/code&gt;时，就可以看到&lt;code&gt;14806&lt;/code&gt;这个namespace。之后pipework会创建一个veth pair。大概是这样：&lt;/p&gt;
&lt;figure class=&quot;highlight fortran&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ip link add &lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; veth1pl14806 mtu &lt;span class=&quot;number&quot;&gt;1500&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt; veth peer &lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; veth1pg14806 mtu &lt;span class=&quot;number&quot;&gt;1500&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中mtu的具体值，实际中是直接使用&lt;code&gt;br0&lt;/code&gt;的mtu值。&lt;code&gt;veth1pl14806&lt;/code&gt;就是’v’加上container中要创建的interface名字，加上’p’，加上’l’(应该是local的意思)，在再加上container的pid。&lt;code&gt;veth1pg14806&lt;/code&gt;同理，’l’换成’g’(guest)。当然，这个命名不重要，只要唯一就可以了。&lt;/p&gt;
&lt;p&gt;之后，pipework会把&lt;code&gt;veth1pl14806&lt;/code&gt;加到&lt;code&gt;br0&lt;/code&gt;中。&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;## &lt;span class=&quot;meta&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;br0 &lt;/span&gt;is linux &lt;span class=&quot;keyword&quot;&gt;bridge&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;ip&lt;/span&gt; link set veth1pl14806 master &lt;span class=&quot;keyword&quot;&gt;br0 &lt;/span&gt;&lt;span class=&quot;title&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;brctl &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;addif &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;br0 &lt;/span&gt;veth1pl14806&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;## &lt;span class=&quot;meta&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;br0 &lt;/span&gt;is OVS &lt;span class=&quot;keyword&quot;&gt;bridge&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;ovs&lt;/span&gt;-vsctl &lt;span class=&quot;keyword&quot;&gt;add-port &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;br0 &lt;/span&gt;veth1pl14806&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;## &lt;span class=&quot;keyword&quot;&gt;bring &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;it &lt;/span&gt;up&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;ip&lt;/span&gt; link set veth1pl14806 up&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;把&lt;code&gt;veth1pg14806&lt;/code&gt;加到&lt;code&gt;14806&lt;/code&gt;这个namespace中。然后改名成eth1，再配置&lt;code&gt;10.10.10.9/24&lt;/code&gt;这个地址和相应路由。&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; link set veth1pg14806 netns &lt;span class=&quot;number&quot;&gt;14806&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec &lt;span class=&quot;number&quot;&gt;14806&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; link set veth1pg14806 name eth1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; netns exec &lt;span class=&quot;number&quot;&gt;14806&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;ip&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10.10&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.10&lt;/span&gt;&lt;span class=&quot;meta&quot;&gt;.9&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt; dev eth1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后会删除之前创建的软链接&lt;code&gt;/var/run/netns/14806&lt;/code&gt;，来防止用户通过&lt;code&gt;ip netns&lt;/code&gt;来做更改。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天才发现&lt;code&gt;ip netns&lt;/code&gt;是这么强大。&lt;code&gt;ip netns&lt;/code&gt;操作的就是Linux network namespace。&lt;/p&gt;
&lt;p&gt;namespaces, cgroups这些技术是Linux LXC的基础，所以也是现在流行的Docker的基础。对于namespeces，有process的namespace，也有network的namespace。如果一个进程跑在一个process namespace中，那么它只能看到同在这个namespace中的进程，也只能和这些进程通信。你在这个namespace中&lt;code&gt;ps -elf&lt;/code&gt;一下，你也只能看到跑在这个namespace的进程。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Vagrant是个好东西</title>
    <link href="http://blog.hanhaishan.com/2015/vagrant-is-pretty-good/"/>
    <id>http://blog.hanhaishan.com/2015/vagrant-is-pretty-good/</id>
    <published>2015-10-24T15:26:39.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;对Macbook Pro蠢蠢欲动很久了，除了因为Mac好看，界面友好外。还有一部分是因为，Mac OS是Unix-like的系统，开发友好。然而我还买不起。所以在Windows一般都是安装Linux虚拟机来当开发环境使用。免费的VirtualBox也很不错。&lt;/p&gt;
&lt;p&gt;但要用VirtualBox搭建个开发环境，我们通常需要下载系统iso镜像，然后安装系统。比如安装Ubuntu Desktop，虽然安装过程都是GUI，点点鼠标就行，但毕竟过程需要一点时间，而且中途需要你人工操作。要是安装Arch Linux这样的distro，安装过程没有GUI，安装过程麻烦，且安装过程一直需要一些操作。系统安装完了，我们通常需要一些简单的网络配置，比如让主机可以直接访问虚拟机，或者配置端口转发。有时，我们还可能需要更方便的文件交换，又需要配置共享文件夹。这些使用Virtualbox和VMWare的虚拟机软件都可以实现，这些东西配置一两次还行，如果你需要经常配置一个新的虚拟机的话，就会觉得很麻烦。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;还好有&lt;a href=&quot;https://www.vagrantup.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Vagrant&lt;/a&gt;这么个东西，以上这些操作都变的很简单。Vagrant并不是像VirtualBox这样的提供虚拟化功能的平台性软件。它就像是对VirtualBox和VMware这些软件的操作和配置的一个统一包装。对于Vagrant来说，VirtualBox， VMWare这样的软件称为&lt;a href=&quot;https://docs.vagrantup.com/v2/providers/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;provider&lt;/a&gt;。要使用Vagrant，除了要安装Vagrant本身以外，还需要provider。Vagrant中有个叫&lt;a href=&quot;https://docs.vagrantup.com/v2/getting-started/boxes.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Box&lt;/a&gt;的概念，一个box就是一个已经拥有系统的镜像，它会作为虚拟机模板。在创建一个单独的虚拟机实例之前，需要先添加box。比如以下命令会从官方的&lt;a href=&quot;https://atlas.hashicorp.com/boxes/search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Catalog&lt;/a&gt;下载并添加名字叫”hashicorp/precise32”的box：&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;vagrant&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;box &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;add &lt;/span&gt;hashicorp/precise32&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在这个Catalog中有很多可以选择的box。但在国内，像这样在线添加box速度会很慢。我们可以从别的地方通过其他方式下载我们需要box，再指定目录添加到vagrant中。比我现在用的是terrywang做的&lt;a href=&quot;https://github.com/terrywang/vagrantboxes/blob/master/archlinux-x86_64.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Arch Linux x86_64 Base Box&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight processing&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;vagrant &lt;span class=&quot;built_in&quot;&gt;box&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;add&lt;/span&gt; &amp;lt;&lt;span class=&quot;built_in&quot;&gt;box&lt;/span&gt;-name&amp;gt; &amp;lt;/path/to/&lt;span class=&quot;built_in&quot;&gt;box&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中&lt;box-name&gt;是我们想给这个box起的一个名字，比如&lt;code&gt;arch-box-64&lt;/code&gt;，后面在创建虚拟机时会用到。接下来，我们只需要创建一个目录，并在该目录中初始化我们的环境就可以了。&lt;/box-name&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;mkdir&lt;/span&gt; arch0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; arch0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vagrant init &lt;span class=&quot;keyword&quot;&gt;arch&lt;/span&gt;-box-64&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在init后，在这个目录下就会生成一个&lt;code&gt;Vagrantfile&lt;/code&gt;。这个&lt;code&gt;Vagrantfile&lt;/code&gt;是Vagrant中的关键。在上面步骤中生成的&lt;code&gt;Vagrantfile&lt;/code&gt;，去掉其中很多解释性的注释后，内容大概如下：&lt;/p&gt;
&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Vagrant.configure(&lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;do&lt;/span&gt; |&lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;|&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;.vm.box = &lt;span class=&quot;string&quot;&gt;&quot;arch-box-64&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;end&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后，我们起虚拟机：&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;vagrant&lt;/span&gt; up&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一次起，时间会比较长一点。以后每次up的时候，都会比较快。然后可以通过以下命令登录到guest&lt;a href=&quot;本文中称运行虚拟机软件的机器叫主机或host，称其中运行的虚拟机实例为虚拟机或guest。不做严谨的区分。&quot;&gt;^1&lt;/a&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;vagrant&lt;/span&gt; ssh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;由于每一个&lt;strong&gt;标准&lt;/strong&gt;的vagrant box在制作的时候，都已经把vagrant官方提供的一个ssh public key添加到box中ssh的authorized_keys中。所以这个登录的时候，不需要输入密码，登录的用户名是vagrant。实际上，虚拟机是把其22(sshd)端口转发到主机的2222端口。所以我们可以通过Putty或者XShell这样的软件登录到127.0.0.1:2222，如果在这些软件中觉得用ssh key比较麻烦的话，输入密码也可以登录，默认的密码也为vagrant。这个guest中root的默认密码也为vagrant，默认也设置好了passwordless sudo。同时，我们在host上创建的这个&lt;code&gt;arch0&lt;/code&gt;这个目录，会自动挂载到guest的&lt;code&gt;/vagrant&lt;/code&gt;目录上，文件共享。虚拟机使用完了，如果这个虚拟机以后也不需要了，可以destroy掉。如果以后还需要使用，可以在虚拟机中直接&lt;code&gt;sudo shutdown -h now&lt;/code&gt;，也可以在外面运行&lt;code&gt;vagrant halt&lt;/code&gt;来关闭虚拟机。以后需要使用的话，再进入这个&lt;code&gt;arch0&lt;/code&gt;目录，来up这个虚拟机。&lt;/p&gt;
&lt;p&gt;知道了以上这些就已经足够我们愉快的玩耍了。这些password less sudo，key based ssh login，port forward, directory sharing等都可以直接在虚拟机以及VirtualBox中做相应的配置来完成，但有了Vagrant，我们不需自己来做这些配置，而且box已经是拥有系统的模板，我们不需要自己安装。不仅是自己玩耍，甚至在商业上可以把自己的产品集成到Vagrant box中，把这个box作为最终的产品进行交付。&lt;/p&gt;
&lt;p&gt;前面提到&lt;a href=&quot;https://docs.vagrantup.com/v2/vagrantfile/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Vagrantfile&lt;/code&gt;&lt;/a&gt;中，我们可以做更多自定义的配置，比如有了如下配置，我们可以通过访问host的8080端口访问guest的80端口。&lt;/p&gt;
&lt;figure class=&quot;highlight arduino&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;Vagrant.configure(&lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;do&lt;/span&gt; |&lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;|&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;config&lt;/span&gt;.vm.network &lt;span class=&quot;string&quot;&gt;&quot;forwarded_port&quot;&lt;/span&gt;, guest: &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;, host: &lt;span class=&quot;number&quot;&gt;8080&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;end&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Vagrantfile中也可以定义内存大小，主机名，ssh登录信息等。除了这些，Vagrantfile中也可以设置一些shell script，让虚拟机在创建时运行它们，比如一些软件的安装命令。更多的参见vagrant的文档。&lt;/p&gt;
&lt;p&gt;另，如果要使用64位的虚拟机，主机的BIOS要打开相应处理器厂商的虚拟化技术。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;对Macbook Pro蠢蠢欲动很久了，除了因为Mac好看，界面友好外。还有一部分是因为，Mac OS是Unix-like的系统，开发友好。然而我还买不起。所以在Windows一般都是安装Linux虚拟机来当开发环境使用。免费的VirtualBox也很不错。&lt;/p&gt;
&lt;p&gt;但要用VirtualBox搭建个开发环境，我们通常需要下载系统iso镜像，然后安装系统。比如安装Ubuntu Desktop，虽然安装过程都是GUI，点点鼠标就行，但毕竟过程需要一点时间，而且中途需要你人工操作。要是安装Arch Linux这样的distro，安装过程没有GUI，安装过程麻烦，且安装过程一直需要一些操作。系统安装完了，我们通常需要一些简单的网络配置，比如让主机可以直接访问虚拟机，或者配置端口转发。有时，我们还可能需要更方便的文件交换，又需要配置共享文件夹。这些使用Virtualbox和VMWare的虚拟机软件都可以实现，这些东西配置一两次还行，如果你需要经常配置一个新的虚拟机的话，就会觉得很麻烦。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>给Nexus 5吃棉花糖</title>
    <link href="http://blog.hanhaishan.com/2015/flash-marshmallow-nexus-5/"/>
    <id>http://blog.hanhaishan.com/2015/flash-marshmallow-nexus-5/</id>
    <published>2015-10-06T13:51:54.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;昨天晚上刷了一下Nexus factory image的页面，还没有Marshmallow的下载地址。于是我&lt;a href=&quot;http://weibo.com/1351146375/CDPSxui4x?from=page_1005051351146375_profile&amp;amp;wvr=6&amp;amp;mod=weibotime&amp;amp;type=comment#_rnd1444136437374&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;刷了个Flyme&lt;/a&gt;玩了一下。睡觉前刷推，看到Marshmallow下载地址放出了。于是今天就刷了Marshmallow(其实，flyme还挺不错)，下面是一点记录。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;下载factory-image&quot;&gt;&lt;a href=&quot;#下载factory-image&quot; class=&quot;headerlink&quot; title=&quot;下载factory image&quot;&gt;&lt;/a&gt;下载factory image&lt;/h3&gt;&lt;p&gt;先从&lt;a href=&quot;https://developers.google.com/android/nexus/images&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Factory Images for Nexus Devices&lt;/a&gt;下载image。要记住下载完之后，一定要验证好md5sum和(或)sha1sum，尤其当你是从别的地方下载时。&lt;/p&gt;
&lt;h3 id=&quot;How-to-flash-a-system-image&quot;&gt;&lt;a href=&quot;#How-to-flash-a-system-image&quot; class=&quot;headerlink&quot; title=&quot;How to flash a system image&quot;&gt;&lt;/a&gt;How to flash a system image&lt;/h3&gt;&lt;p&gt;方法在前面提到官方的image下载页面就有详细的说明。&lt;/p&gt;
&lt;p&gt;直接在Windows上刷的话可能会有USB driver上的问题。反正我是通过VirtualBox中的Ubuntu来刷机的，ubuntu中安装adb/fastboot tool也非常方便。如果是像我这样通过虚拟机刷机，不要忘记手机插上Host的USB后要把设备分配给Guest虚拟机。&lt;/p&gt;
&lt;p&gt;我在刷的过程中，每次刷好bootloader和radio后，都会遇到下面的问题，试了几次都一样。&lt;/p&gt;
&lt;figure class=&quot;highlight livecodeserver&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;archive does &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; contain &lt;span class=&quot;string&quot;&gt;&#39;boot.sig&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;archive does &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; contain &lt;span class=&quot;string&quot;&gt;&#39;recovery.sig&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;failed &lt;span class=&quot;built_in&quot;&gt;to&lt;/span&gt; allocate &lt;span class=&quot;number&quot;&gt;1043723460&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;error: update package missing &lt;span class=&quot;keyword&quot;&gt;system&lt;/span&gt;.img&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;解决方法就是把&lt;code&gt;image-hammerhead-mra58k.zip&lt;/code&gt;解包后分开刷。&lt;/p&gt;
&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm:&lt;/span&gt;~/hammerhead-mra58k# unzip image-hammerhead-mra58k.zip &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;Archive&lt;/span&gt;:  image-hammerhead-mra58k.zip&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: android-info.txt        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: cache.img               &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: boot.img                &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: recovery.img            &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: userdata.img            &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;inflating&lt;/span&gt;: system.img&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中刷&lt;code&gt;system.img&lt;/code&gt;的过程时间会比较长点，要耐心一点。&lt;/p&gt;
&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm:&lt;/span&gt;~/hammerhead-mra58k# fastboot flash boot boot.img &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;target reported max download size of &lt;span class=&quot;number&quot;&gt;1073741824&lt;/span&gt; bytes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sending &lt;span class=&quot;string&quot;&gt;&#39;boot&#39;&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;9156&lt;/span&gt; KB)...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;2.108s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;writing &lt;span class=&quot;string&quot;&gt;&#39;boot&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;0.794s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;finished. total &lt;span class=&quot;attribute&quot;&gt;time&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;2.902s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm&lt;/span&gt;:~/hammerhead-mra58k# fastboot flash recovery recovery.img &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;target reported max download size of &lt;span class=&quot;number&quot;&gt;1073741824&lt;/span&gt; bytes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sending &lt;span class=&quot;string&quot;&gt;&#39;recovery&#39;&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;10016&lt;/span&gt; KB)...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;2.083s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;writing &lt;span class=&quot;string&quot;&gt;&#39;recovery&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;0.851s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;finished. total &lt;span class=&quot;attribute&quot;&gt;time&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;2.935s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm&lt;/span&gt;:~/hammerhead-mra58k# fastboot flash system system.img &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;target reported max download size of &lt;span class=&quot;number&quot;&gt;1073741824&lt;/span&gt; bytes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;erasing &lt;span class=&quot;string&quot;&gt;&#39;system&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;1.338s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sending &lt;span class=&quot;string&quot;&gt;&#39;system&#39;&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;1019261&lt;/span&gt; KB)...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [&lt;span class=&quot;number&quot;&gt;215.548s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;writing &lt;span class=&quot;string&quot;&gt;&#39;system&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [ &lt;span class=&quot;number&quot;&gt;70.168s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;finished. total &lt;span class=&quot;attribute&quot;&gt;time&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;287.059s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm&lt;/span&gt;:~/hammerhead-mra58k# fastboot flash cache cache.img &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;target reported max download size of &lt;span class=&quot;number&quot;&gt;1073741824&lt;/span&gt; bytes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;erasing &lt;span class=&quot;string&quot;&gt;&#39;cache&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;0.511s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sending &lt;span class=&quot;string&quot;&gt;&#39;cache&#39;&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;13348&lt;/span&gt; KB)...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;2.990s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;writing &lt;span class=&quot;string&quot;&gt;&#39;cache&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;1.495s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;finished. total &lt;span class=&quot;attribute&quot;&gt;time&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;4.996s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@ubuvm&lt;/span&gt;:~/hammerhead-mra58k# fastboot flash userdata userdata.img &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;target reported max download size of &lt;span class=&quot;number&quot;&gt;1073741824&lt;/span&gt; bytes&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;erasing &lt;span class=&quot;string&quot;&gt;&#39;userdata&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [ &lt;span class=&quot;number&quot;&gt;12.978s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sending &lt;span class=&quot;string&quot;&gt;&#39;userdata&#39;&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;137318&lt;/span&gt; KB)...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [ &lt;span class=&quot;number&quot;&gt;29.485s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;writing &lt;span class=&quot;string&quot;&gt;&#39;userdata&#39;&lt;/span&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;OKAY [  &lt;span class=&quot;number&quot;&gt;9.136s&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;finished. total &lt;span class=&quot;attribute&quot;&gt;time&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;51.599s&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后一步falsh userdata，会抹除手机上的用户数据/应用等。上面的步骤完成后，重启手机。第一次启动的时间会比较长。&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;fastboot&lt;/span&gt; reboot&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;初始化设置的时候，会提示连接到WIFI，连接之后就会出现“正在检查网络连接…此过程最多可能需要2分钟”，不要信它，我等了十几分钟也没好，所以可以跳过，先不要连WIFI。&lt;/p&gt;
&lt;h3 id=&quot;root&quot;&gt;&lt;a href=&quot;#root&quot; class=&quot;headerlink&quot; title=&quot;root&quot;&gt;&lt;/a&gt;root&lt;/h3&gt;&lt;p&gt;参考xda上这个&lt;a href=&quot;http://forum.xda-developers.com/showpost.php?p=63147932&amp;amp;postcount=81&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;回复&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;目前Nexsus marshmallow要root的话，需要替换kernel。下载地址&lt;a href=&quot;http://www.mediafire.com/download/b69gq3wnanmmd4g/StephanMc_Kernel-hammerhead-20150904.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在这&lt;/a&gt;，这个kernel相对原厂kernel的区别就是可root，没做其他优化和更改。&lt;/p&gt;
&lt;p&gt;下载解压后，会有个boot.img，然后flash：&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;fastboot flash &lt;span class=&quot;keyword&quot;&gt;boot&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boot&lt;/span&gt;.img&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再刷入第三方的recovery，目前最有名的就是TWRP的recovery了。Nexus 5的TWRP recovery&lt;a href=&quot;https://dl.twrp.me/hammerhead/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在这&lt;/a&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;fastboot&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;flash&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;recovery&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;twrp-2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1-hammerhead&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.img&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启手机，进入recovery。然后卡刷Beta版的Supersu。下载地址&lt;a href=&quot;https://download.chainfire.eu/740/SuperSU/BETA-SuperSU-v2.49.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在这&lt;/a&gt;。到此就root完成了。&lt;/p&gt;
&lt;h3 id=&quot;Others&quot;&gt;&lt;a href=&quot;#Others&quot; class=&quot;headerlink&quot; title=&quot;Others&quot;&gt;&lt;/a&gt;Others&lt;/h3&gt;&lt;p&gt;在5.0时，状态栏WIFI标志上会有感叹号，在6.0上问题还是一样。这也会导致系统更耗电。出现这个问题的原因，以及解决的方法，看这篇&lt;a href=&quot;http://www.noisyfox.cn/45.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文章&lt;/a&gt;。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;昨天晚上刷了一下Nexus factory image的页面，还没有Marshmallow的下载地址。于是我&lt;a href=&quot;http://weibo.com/1351146375/CDPSxui4x?from=page_1005051351146375_profile&amp;amp;wvr=6&amp;amp;mod=weibotime&amp;amp;type=comment#_rnd1444136437374&quot;&gt;刷了个Flyme&lt;/a&gt;玩了一下。睡觉前刷推，看到Marshmallow下载地址放出了。于是今天就刷了Marshmallow(其实，flyme还挺不错)，下面是一点记录。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>无root权限从源码编译安装的痛苦</title>
    <link href="http://blog.hanhaishan.com/2015/build-and-install-from-source-with-out-root/"/>
    <id>http://blog.hanhaishan.com/2015/build-and-install-from-source-with-out-root/</id>
    <published>2015-09-09T14:29:17.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;平时在公司上班的时候，我一般都是自己的办公电脑(Windows 7)上通过SSH软件登陆到公司的代码/编译服务器的。我比较喜欢用的是Xshell，但公司没有购买Xshell，公司前段时间发邮件明确指出不可以在公司使用这类软件，所以就想着用VNC。&lt;/p&gt;
&lt;p&gt;平时偶尔也用VNC，但VNC中字体渲染看着实在难受。我们的服务器上有多个桌面环境，最近发现如果DE使用Gnome的话，安装&lt;a href=&quot;http://font.ubuntu.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ubuntu的字体&lt;/a&gt;改改配置之后，字体渲染还可以接受。今天在使用的过程中，在VNC中用firefiox访问github时，github提示firefox版本过老。公司的编译服务器，我只有普通用户权限，所以没法升级firefox。平时我需要安装东西的时候，基本上都是从源码编译，安装到自己的目录。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./configure --prefix=/home/haishanh/usr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;make&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;make install&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;因为我知道浏览器这种东西，要想从源码编译出来会非常麻烦。所以我先是下载了Chrome的rpm包，安装时提示缺很多依赖。然后我就去下载&lt;a href=&quot;https://nightly.mozilla.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Firefox的Nightly Build&lt;/a&gt;，运行之后，还是提示缺少GTK3。使用Nightly版，遇到一些服务器上现有软件/库文件过老的问题是很正常的，毕竟我们的服务器的系统是这样的老：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ cat /etc/redhat-release &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Xxx Linux release 6.1 (Carbon)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ uname -r&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2.6.32-220.4.1.el6.x86_64&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;于是为了安装GTK3，我又干了如下的事：&lt;/p&gt;
&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ &lt;span class=&quot;keyword&quot;&gt;history&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;531&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;532&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;533&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;534&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; PKG_CONFIG_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;535&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $PKG_CONFIG_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;536&lt;/span&gt;  export PKG_CONFIG_PATH=/home/haishanh/usr64/lib/pkgconfig&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;537&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;538&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;539&lt;/span&gt;  wget http://ftp.gnome.org/pub/GNOME/sources/pango/&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;/pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;.tar.xz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;540&lt;/span&gt;  tar xvf pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;.tar.xz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;541&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;542&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;543&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;544&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;545&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;546&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;547&lt;/span&gt;  wget http://cairographics.org/releases/cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;.tar.xz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;548&lt;/span&gt;  tar xvf cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;.tar.xz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;549&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;550&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;551&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;552&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;553&lt;/span&gt;  wget http://cairographics.org/releases/pixman-&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;554&lt;/span&gt;  tar xvf pixman-&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;.tar.gz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;555&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; pixman-&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;556&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;557&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;558&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;559&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;560&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;561&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;562&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;563&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;564&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;565&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;566&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;567&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;568&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;569&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;570&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;571&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pixman-&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;572&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;573&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;574&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;575&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;576&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;577&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;578&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;579&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;580&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;581&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;582&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;583&lt;/span&gt;  wget http://www.freedesktop.org/software/harfbuzz/release/harfbuzz-&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;.tar.bz2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;584&lt;/span&gt;  tar xvf harfbuzz-&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;.tar.bz2 &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;585&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; harfbuzz-&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;586&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;587&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;588&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;589&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;590&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;591&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;592&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;593&lt;/span&gt;  wget http://www.freedesktop.org/software/fontconfig/release/fontconfig-&lt;span class=&quot;number&quot;&gt;2.11&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;92&lt;/span&gt;.tar.bz2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;594&lt;/span&gt;  tar xvf fontconfig-&lt;span class=&quot;number&quot;&gt;2.11&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;92&lt;/span&gt;.tar.bz2 &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;595&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; fontconfig-&lt;span class=&quot;number&quot;&gt;2.11&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;92&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;596&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;597&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;598&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;599&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;600&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../cairo-&lt;span class=&quot;number&quot;&gt;1.14&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;601&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;j&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;602&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;603&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;604&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;605&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../harfbuzz-&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;606&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;607&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;608&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;609&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;610&lt;/span&gt;  wget http://download.savannah.gnu.org/releases/freetype/freetype-&lt;span class=&quot;number&quot;&gt;2.6&lt;/span&gt;.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;611&lt;/span&gt;  tar xvf freetype-&lt;span class=&quot;number&quot;&gt;2.6&lt;/span&gt;.tar.gz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;612&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; freetype-&lt;span class=&quot;number&quot;&gt;2.6&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;613&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;614&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../harfbuzz-&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;615&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;616&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../pango-&lt;span class=&quot;number&quot;&gt;1.37&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;617&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;618&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;619&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;620&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;621&lt;/span&gt;  wget http&lt;span class=&quot;variable&quot;&gt;s:&lt;/span&gt;//developer.gnome.org/atk/atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;622&lt;/span&gt;  wget --&lt;span class=&quot;keyword&quot;&gt;no&lt;/span&gt;-check-certificate http&lt;span class=&quot;variable&quot;&gt;s:&lt;/span&gt;//developer.gnome.org/atk/atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;623&lt;/span&gt;  tar xvf atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.gz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;624&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;625&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;626&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;627&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;628&lt;/span&gt;  rrm -rf atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;629&lt;/span&gt;  rm -rf atk-html-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;630&lt;/span&gt;  wget http://ftp.gnome.org/pub/gnome/sources/atk/&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;/atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.xz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;631&lt;/span&gt;  tar xvf atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.xz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;632&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;633&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;634&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;635&lt;/span&gt;  pkg-config --modversion glib-&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;636&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $LD_LIBRARY_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;637&lt;/span&gt;  export LD_LIBRARY_PATH=/home/haishanh/usr64/lib64:/home/haishanh/usr64/li&lt;span class=&quot;variable&quot;&gt;b:&lt;/span&gt;$&amp;#123;LD_LIBRARY_PATH&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;638&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $LD_LIBRARY_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;639&lt;/span&gt;  pkg-config --modversion glib-&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;640&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;641&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;pwd&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;642&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;643&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;644&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;645&lt;/span&gt;  wget http://ftp.gnome.org/pub/GNOME/sources/gdk-pixbuf/&lt;span class=&quot;number&quot;&gt;2.30&lt;/span&gt;/gdk-pixbuf-&lt;span class=&quot;number&quot;&gt;2.30&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;.tar.xz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;646&lt;/span&gt;  tar xvf gdk-pixbuf-&lt;span class=&quot;number&quot;&gt;2.30&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;.tar.xz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;647&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; gdk-pixbuf-&lt;span class=&quot;number&quot;&gt;2.30&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;648&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;649&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;650&lt;/span&gt;  wget ftp://ftp.remotesensing.org/pub/libtiff/tiff-&lt;span class=&quot;number&quot;&gt;4.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;.tar.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;651&lt;/span&gt;  tar xvf tiff-&lt;span class=&quot;number&quot;&gt;4.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;.tar.gz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;652&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; tiff-&lt;span class=&quot;number&quot;&gt;4.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;653&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;654&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../gdk-pixbuf-&lt;span class=&quot;number&quot;&gt;2.30&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;655&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;656&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt; ~/usr64/lib/libtiff.&lt;span class=&quot;keyword&quot;&gt;so&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;657&lt;/span&gt;  dir=/home/haishanh/usr64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;658&lt;/span&gt;  ./configure --prefix=$&amp;#123;dir&amp;#125; LDFLAG=&lt;span class=&quot;string&quot;&gt;&quot;-L$&amp;#123;dir&amp;#125;/lib&quot;&lt;/span&gt; CFLAGS=&lt;span class=&quot;string&quot;&gt;&quot;-I$&amp;#123;dir&amp;#125;/include&quot;&lt;/span&gt; CPPFLAGS=&lt;span class=&quot;string&quot;&gt;&quot;-I$&amp;#123;dir&amp;#125;/include&quot;&lt;/span&gt; CXXFLAGS=&lt;span class=&quot;string&quot;&gt;&quot;-I$&amp;#123;dir&amp;#125;/include&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;659&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt; ~/usr64/lib&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;660&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt; ~/usr64/lib/libtiff.&lt;span class=&quot;keyword&quot;&gt;so&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;661&lt;/span&gt;  ./configure --prefix=$&amp;#123;dir&amp;#125; LDFLAG=&lt;span class=&quot;string&quot;&gt;&#39;-L/home/haishanh/usr64/lib&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;662&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;ls&lt;/span&gt; ~/usr64/lib/libtif*&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;663&lt;/span&gt;  ./configure --prefix=$&amp;#123;dir&amp;#125; LDFLAG=&lt;span class=&quot;string&quot;&gt;&#39;-L/home/haishanh/usr64/lib&#39;&lt;/span&gt; --without-libtiff&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;664&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;665&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ../gtk+-&lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;666&lt;/span&gt;  ./configure --prefix=$&amp;#123;dir&amp;#125; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;667&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; ..&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;668&lt;/span&gt;  wget http://ftp.gnome.org/pub/gnome/sources/at-spi2-atk/&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;/at-spi2-atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.xz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;669&lt;/span&gt;  tar xvf at-spi2-atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.tar.xz &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;670&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;cd&lt;/span&gt; at-spi2-atk-&lt;span class=&quot;number&quot;&gt;2.16&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;671&lt;/span&gt;  ./configure --prefix=/home/haishanh/usr64 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; -j8 &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;make&lt;/span&gt; install &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;672&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;history&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这些命令，在history里面看起来只是一行一行的，但整个过程花费了我大量大量的effort。最要命是，我到最后还是没有编译安装好。&lt;/p&gt;
&lt;p&gt;其实在没有root权限的情况，通过源码安装软件通常都是不可避免的(在此，安利一下Sublime Text 3，一个tar包下载下来，untar后直接就可以运行)。所以我平时也没少做。大部分时候，都能比较顺利的安装。但有些时候你要处理的是，依赖的安装，依赖的依赖的安装，依赖的依赖的依赖的安装，有的时候，我甚至忘了我是为了哪个库，去安装当前的库。&lt;/p&gt;
&lt;p&gt;我觉得造成这样的原因主要是：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;没有root权限，如果有root权限直接就可以通过包管理软件去安装，比如说EL上yum，Debian上apt-get，Arch上pacman&lt;/li&gt;
&lt;li&gt;当前系统以及系统上的软件和库比较老&lt;/li&gt;
&lt;li&gt;Linux/Unix free的cost，这个地方free当然指的是自由。&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;平时在公司上班的时候，我一般都是自己的办公电脑(Windows 7)上通过SSH软件登陆到公司的代码/编译服务器的。我比较喜欢用的是Xshell，但公司没有购买Xshell，公司前段时间发邮件明确指出不可以在公司使用这类软件，所以就想着用VNC。&lt;/p&gt;
&lt;p&gt;平时偶尔也用VNC，但VNC中字体渲染看着实在难受。我们的服务器上有多个桌面环境，最近发现如果DE使用Gnome的话，安装&lt;a href=&quot;http://font.ubuntu.com/&quot;&gt;Ubuntu的字体&lt;/a&gt;改改配置之后，字体渲染还可以接受。今天在使用的过程中，在VNC中用firefiox访问github时，github提示firefox版本过老。公司的编译服务器，我只有普通用户权限，所以没法升级firefox。平时我需要安装东西的时候，基本上都是从源码编译，安装到自己的目录。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>在公司内网使用Github</title>
    <link href="http://blog.hanhaishan.com/2015/use-github-in-your-company-intranet/"/>
    <id>http://blog.hanhaishan.com/2015/use-github-in-your-company-intranet/</id>
    <published>2015-06-25T14:12:12.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;在公司内网使用Github前提是你要有能访问Github的HTTP/HTTPS代理。假设HTTP代理是&lt;code&gt;http://1.2.3.4:8000&lt;/code&gt;，HTTPS代理是&lt;code&gt;https://1.2.3.4:8000&lt;/code&gt;。那么可以在你的&lt;code&gt;.bashrc&lt;/code&gt;或者&lt;code&gt;.zshrc&lt;/code&gt;中添加下面两行。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; HTTP_PROXY=http://1.2.3.4:8000&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; HTTPS_PROXY=https://1.2.3.4:8000&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通常这个时候你已经可以&lt;code&gt;clone&lt;/code&gt; Github上的repo了（当然要选择https的repo）。但可能还是不能&lt;code&gt;push&lt;/code&gt;。   &lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;如果你需要 &lt;code&gt;push&lt;/code&gt;的话，需要借助另外一个工具&lt;a href=&quot;http://agroman.net/corkscrew/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Corkscrew&lt;/code&gt;&lt;/a&gt;。   &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Corkscrew is a tool for tunneling SSH through HTTP proxies.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下载Corkscrew的源码，编译安装。通常在公司你应该没有root权限的吧，所以在编译前的configure的时候prefix选择自己可以读写的目录。我在我们公司使用的Scientific Linux上configure的时候，configure不能guess到正确的host type，需要用–host来指定一下。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; &amp;lt;corkscrew_src&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./confgure --prefix=/home/haishanh --host=i686-pc-linux-gnu&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;make &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;make install&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后在&lt;code&gt;~/.ssh/config&lt;/code&gt;中填入以下行&lt;br&gt;&lt;figure class=&quot;highlight lsl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ProxyCommand /home/haishanh/bin/corkscrew &lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.4&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;8000&lt;/span&gt; %h %p&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这个时候你&lt;code&gt;clone&lt;/code&gt; &lt;code&gt;push&lt;/code&gt; &lt;code&gt;pull&lt;/code&gt;应该都没问题，因为Corkscrew是tunnel SSH流量的，所以我们要用repo的SSH URL来做这些操作。   &lt;/p&gt;
&lt;p&gt;因为上面这个配置存在，你SSH到别的HOST都会从proxy走一遍，所以速度会特别慢，我的做法用个脚本去wrapper一下git，如下&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;gen_ssh_config&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  cat&amp;lt;&amp;lt;EOF&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ProxyCommand /home/haishanh/bin/corkscrew 1.2.3.4 8000 %h %p&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;EOF&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;cleanup&lt;/span&gt;&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; ~/.ssh/config ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# echo &quot;cleanup&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    rm -rf ~/.ssh/config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;trap&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;cleanup&quot;&lt;/span&gt; INT EXIT&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ -n &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;push&quot;&lt;/span&gt; -o &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;clone&quot;&lt;/span&gt; -o &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;pull&quot;&lt;/span&gt; ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;using corkscrew...&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  gen_ssh_config &amp;gt; ~/.ssh/config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;# rw for user only&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  chmod 600 ~/.ssh/config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$&amp;#123;@&amp;#125;&lt;/span&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;假设这个脚本叫&lt;code&gt;~/bin/mygit.sh&lt;/code&gt;，你可以在你的rc文件里面添加一个alias。&lt;/p&gt;
&lt;figure class=&quot;highlight monkey&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;git&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;~/bin/mygit.sh&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Now you can use github freely.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在公司内网使用Github前提是你要有能访问Github的HTTP/HTTPS代理。假设HTTP代理是&lt;code&gt;http://1.2.3.4:8000&lt;/code&gt;，HTTPS代理是&lt;code&gt;https://1.2.3.4:8000&lt;/code&gt;。那么可以在你的&lt;code&gt;.bashrc&lt;/code&gt;或者&lt;code&gt;.zshrc&lt;/code&gt;中添加下面两行。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; HTTP_PROXY=http://1.2.3.4:8000&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; HTTPS_PROXY=https://1.2.3.4:8000&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通常这个时候你已经可以&lt;code&gt;clone&lt;/code&gt; Github上的repo了（当然要选择https的repo）。但可能还是不能&lt;code&gt;push&lt;/code&gt;。   &lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Finally,  毕业了</title>
    <link href="http://blog.hanhaishan.com/2014/graduated_finally/"/>
    <id>http://blog.hanhaishan.com/2014/graduated_finally/</id>
    <published>2014-04-30T21:46:40.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://carlog.qiniudn.com/ms_degree_certificate.jpg&quot; alt=&quot;Graduation&quot;&gt;&lt;/p&gt;
&lt;p&gt;今天终于拿到学位证了。&lt;/p&gt;
&lt;p&gt;因为我校毕业证和学位证是分开发下来了，毕业证很早就拿到了，然后在学校开了个学术委员会召开时间的证明就先上班了。所以，我其实已经上班快两周了。&lt;/p&gt;
&lt;p&gt;话说毕业真的不容易，或者更准确的说法是，毕业对我来说不容易。Anyway, 往事不堪回首。所以当家里人提出让我读博的想法时，我都会动之以情晓之以理陈述早毕业的种种好处。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://carlog.qiniudn.com/ms_degree_certificate.jpg&quot; alt=&quot;Graduation&quot;&gt;&lt;/p&gt;
&lt;p&gt;今天终于拿到学位证了。&lt;/p&gt;
&lt;p&gt;因为我校毕业证和学位证是分开发下来了，毕业证很早就拿到了，然
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>答辩完</title>
    <link href="http://blog.hanhaishan.com/2014/after_master_dissertation_defence/"/>
    <id>http://blog.hanhaishan.com/2014/after_master_dissertation_defence/</id>
    <published>2014-03-21T13:01:56.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;今天终于答辩完了，离毕业算是近了一步。&lt;/p&gt;
&lt;p&gt;自己在众人面前时的表达能力真的是有待提高。自己的语速总是不能达到理想的效果，答辩演讲的时间非常短，所以必须要控制好语速。但自己一说快，舌头就是各种打结，变的语无伦次，说出来的话也逻辑混乱。&lt;/p&gt;
&lt;p&gt;从小我就是个不太会在太多人面前表现自己的人。很小的时候是那点自卑导致自己不敢表现，基本要在众人面前表演、表现、表达的机会我都是能逃避的就逃避，结果就是恶性循环。现在的我在很熟的朋友面前时，语言表达问题并不大，但只要有其中有不太熟的人，还是会让我紧张。总是担心表达的不好，其结果就是真的表达的不好，sigh。&lt;/p&gt;
&lt;p&gt;Anyway，我知道我必须很努力，才能看起来毫不费力。&lt;/p&gt;
&lt;iframe src=&quot;//instagram.com/p/lyqliDstso/embed/&quot; width=&quot;612&quot; height=&quot;710&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowtransparency=&quot;true&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;上面是在答辩前隔着窗户拍的学校。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天终于答辩完了，离毕业算是近了一步。&lt;/p&gt;
&lt;p&gt;自己在众人面前时的表达能力真的是有待提高。自己的语速总是不能达到理想的效果，答辩演讲的时间非常短，所以必须要控制好语速。但自己一说快，舌头就是各种打结，变的语无伦次，说出来的话也逻辑混乱。&lt;/p&gt;
&lt;p&gt;从小我就是个不太
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>辛普森案和陪审团制度</title>
    <link href="http://blog.hanhaishan.com/2014/simpson_murder_case_n_jury/"/>
    <id>http://blog.hanhaishan.com/2014/simpson_murder_case_n_jury/</id>
    <published>2014-01-10T14:00:18.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;之前在林达的&lt;a href=&quot;http://book.douban.com/subject/1027191/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;「近距离看美国」&lt;/a&gt;系列书中就看过&lt;a href=&quot;http://zh.wikipedia.org/wiki/%E8%BE%9B%E6%99%AE%E6%A3%AE%E6%A1%88&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;辛普森案&lt;/a&gt;的始末，当时就给我很大的冲击。对美国的司法制度和陪审团制度也有了一定的了解。&lt;br&gt;今天看到罗辑思维的这个视频&lt;strong&gt;奇葩的陪审团&lt;/strong&gt;也是讲的这个案子。罗老师的讲说很生动，很值得一看。&lt;br&gt;虽然本来是铁板钉钉的辛普森谋杀，但最后陪审团的裁定结果却是无罪。正义没有得到伸张，美国司法制度自有其缺陷。但从本案也能看到美国司法制度对公民的保护的程度。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;之前在林达的&lt;a href=&quot;http://book.douban.com/subject/1027191/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;「近距离看美国」&lt;/a&gt;系列书中就看过&lt;a href=&quot;http://zh.wikipedia.or
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>What is Procrastination</title>
    <link href="http://blog.hanhaishan.com/2014/What_is_Procrastination_Video/"/>
    <id>http://blog.hanhaishan.com/2014/What_is_Procrastination_Video/</id>
    <published>2014-01-09T11:05:33.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;这个一个非常关于什么是拖延症的视频，非常棒。&lt;/p&gt;
&lt;p&gt;视频很短，它没有告诉你怎么战胜拖延症，但能让你更了解一点拖延症。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这个一个非常关于什么是拖延症的视频，非常棒。&lt;/p&gt;
&lt;p&gt;视频很短，它没有告诉你怎么战胜拖延症，但能让你更了解一点拖延症。&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Goodbye 2013, Hello 2014</title>
    <link href="http://blog.hanhaishan.com/2013/Goodbye_2013_Hello_2014/"/>
    <id>http://blog.hanhaishan.com/2013/Goodbye_2013_Hello_2014/</id>
    <published>2013-12-31T14:23:05.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;现在是2013年12月31日22点23分，还有不到2个小时，2013就要过去了。去年这个时候，不知道是在哪听说五月天等会在外滩有露天表演，还有灯光秀什么的，于是去了外滩。那天晚上南京东路上全是人，到了外滩，连站的地方都没有，所谓的表演也没看到，灯光秀虽然有，但位置角度并不好，而且人挤着人，所以也就勉强觉得还行。零点倒计时应该是整个过程最有意思的，大家一起倒计时，还是挺High的。散场的时候，因为刚开始打不到车，于是大家竟走着走着走回了学校。&lt;/p&gt;
&lt;p&gt;在微博流行的时代，知识只是片段。所以去年的这个时候想着今年要多看点书，于是刚刚去我的豆瓣看看我的记录，貌似只有难以启齿的5本书，而且都差不多都是短篇。好吧，2014我要多看点书。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;  
&lt;p&gt;###年度事件&lt;br&gt;找工作。&lt;br&gt;年度事件是找工作无疑，虽然这不算是一个事件。不出意外我会在14年的3月末毕业，所以从今年9月份开始就一直在工作。学着通信专业，却是找的计算机专业的工作，而这两方面，自己都只是半吊子。所以找工作的这段时间对我来说还真是挺辛苦的，中间参加了无数的宣讲会，笔试和面试。&lt;/p&gt;
&lt;p&gt;###年度应用&lt;br&gt;instagram&lt;br&gt;2013年我一共在instagram上发布了153张照片或视频。&lt;/p&gt;
&lt;iframe src=&quot;//instagram.com/p/fC24dEstk1/embed/&quot; width=&quot;612&quot; height=&quot;710&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowtransparency=&quot;true&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;###年度手机游戏&lt;br&gt;节奏大师。。。&lt;br&gt;我玩的游戏不多，花在游戏上的时间也不多，而且现在也只玩手机游戏，我今年花的时间最多的游戏应该是微信的节奏大师。因为我还是挺喜欢音乐类游戏的，虽然节奏大师的质量跟Tap Tap Revenge什么的还是差远了，但是集成了社交之后，还是稍微弥补了一点质量上的不足，反正我还是玩的挺开心的。&lt;/p&gt;
&lt;p&gt;###年度Podcast&lt;br&gt;&lt;a href=&quot;http://www.ydlbk.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;友的聊&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://carlog.qiniudn.com/youdeliao.jpg&quot; alt=&quot;Youdeliao&quot;&gt;&lt;/p&gt;
&lt;p&gt;忠实听众，从第一期就开始期期不落。&lt;/p&gt;
&lt;p&gt;###年度电影&lt;br&gt;&lt;a href=&quot;http://movie.douban.com/subject/3993559/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;赛德克·巴莱&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://carlog.qiniudn.com/seediq_bale.jpg&quot; alt=&quot;Seediq Bale&quot;&gt;&lt;/p&gt;
&lt;p&gt;电影分为上下集，台湾是2011年上映的，大陆是是12年上映的，但我是今年才看的这部片子。我并不想去讨论电影中用野蛮的大开杀戒来维护尊严的方式在道德上的正确与否，我只是单纯的觉得这部电影拍出了史诗片的悲壮场面，这样的电影在大陆真还没见着过。&lt;/p&gt;
&lt;p&gt;本post真水，希望明年的不要再水了==&lt;/p&gt;
&lt;p&gt;HAPPY NEW YEAR&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;现在是2013年12月31日22点23分，还有不到2个小时，2013就要过去了。去年这个时候，不知道是在哪听说五月天等会在外滩有露天表演，还有灯光秀什么的，于是去了外滩。那天晚上南京东路上全是人，到了外滩，连站的地方都没有，所谓的表演也没看到，灯光秀虽然有，但位置角度并不好，而且人挤着人，所以也就勉强觉得还行。零点倒计时应该是整个过程最有意思的，大家一起倒计时，还是挺High的。散场的时候，因为刚开始打不到车，于是大家竟走着走着走回了学校。&lt;/p&gt;
&lt;p&gt;在微博流行的时代，知识只是片段。所以去年的这个时候想着今年要多看点书，于是刚刚去我的豆瓣看看我的记录，貌似只有难以启齿的5本书，而且都差不多都是短篇。好吧，2014我要多看点书。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Love Actually is All Around</title>
    <link href="http://blog.hanhaishan.com/2013/Love_Actually_Is_A_Good_Movie/"/>
    <id>http://blog.hanhaishan.com/2013/Love_Actually_Is_A_Good_Movie/</id>
    <published>2013-12-25T15:03:13.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/Love-Actually.jpg&quot; alt=&quot;Love Actually&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Whenever I get gloomy with the state of the world,&lt;br&gt;I think about the arrivals gate at Heathrow airport.&lt;br&gt;General opinion makes out that we live in a world of hatred and greed, but I don’t see that. Seems to me that love is everywhere.&lt;br&gt;Often it’s not particularly dignified or newsworthy but it’s alwas there.&lt;br&gt;Fathers and sons, mothers and daughters, husbands and wives, boyfriends, girlfriends, old friends.&lt;br&gt;When the planes hits the Twin Towers, as far as I know, none of the phone calss from people on board were messages of hate or revenge, they were all messages of love.&lt;br&gt;If you look for it, I’ve got a sneaky feeling you’ll find that love actually is all around.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是电影&lt;em&gt;Love Actually&lt;/em&gt;开始的时候，在片中饰演英国首相的Hugh Grant做的旁白。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I feel it in my fingers&lt;br&gt;I feel it in my toes&lt;br&gt;Christmas is all around me&lt;br&gt;And so the feeling grows&lt;br&gt;It’s written on the wind&lt;br&gt;It’s everywhere I go&lt;br&gt;So if you really love Christmas&lt;br&gt;Come on and let it snow&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是电影开始时，片中的摇滚明星Billy在录音室唱的歌。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;   
&lt;p&gt;大学的时候英语系有个外教每周周五晚会在一个教室用投影给大家放电影，这个活动是开放的，所以那个时候，只要周五晚有空都会过去看电影。第一次看&lt;em&gt;Love Actually&lt;/em&gt;就是在那个时候，之后好像每个圣诞节都会回顾一下这部圣诞电影。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Love Actually&lt;/em&gt;是最适合圣诞节时看的大杂烩爱情喜剧了。不管是首相，作家，摇滚歌手，中产阶级，穷屌丝都能在圣诞节前皆大欢喜的找到真爱。这片让我觉得英国人的爱情观比美国人还开放。片中各种熟悉的面孔。这是第二次看，才发现，「神探夏洛克」里的华生也在其中。 &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/Love-Actually.jpg&quot; alt=&quot;Love Actually&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Whenever I get gloomy with the state of the world,&lt;br&gt;I think about the arrivals gate at Heathrow airport.&lt;br&gt;General opinion makes out that we live in a world of hatred and greed, but I don’t see that. Seems to me that love is everywhere.&lt;br&gt;Often it’s not particularly dignified or newsworthy but it’s alwas there.&lt;br&gt;Fathers and sons, mothers and daughters, husbands and wives, boyfriends, girlfriends, old friends.&lt;br&gt;When the planes hits the Twin Towers, as far as I know, none of the phone calss from people on board were messages of hate or revenge, they were all messages of love.&lt;br&gt;If you look for it, I’ve got a sneaky feeling you’ll find that love actually is all around.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是电影&lt;em&gt;Love Actually&lt;/em&gt;开始的时候，在片中饰演英国首相的Hugh Grant做的旁白。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I feel it in my fingers&lt;br&gt;I feel it in my toes&lt;br&gt;Christmas is all around me&lt;br&gt;And so the feeling grows&lt;br&gt;It’s written on the wind&lt;br&gt;It’s everywhere I go&lt;br&gt;So if you really love Christmas&lt;br&gt;Come on and let it snow&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是电影开始时，片中的摇滚明星Billy在录音室唱的歌。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Installing OpenWRT on Hiwifi</title>
    <link href="http://blog.hanhaishan.com/2013/installing_openwrt_on_hiwifi/"/>
    <id>http://blog.hanhaishan.com/2013/installing_openwrt_on_hiwifi/</id>
    <published>2013-12-13T10:58:46.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;买了个极路由，外观什么的确实挺酷，管理界面也比较友好，但所谓的App Store加速什么的，我真的完全没体会到，而且我的笔记本连上后，隔一段时间就会掉。所以就准备刷个OpenWRT，而且还可以用用goagent，之前尝试过一次，刷机应该是成功了，但telnet的时候一直连不上，应该是因为极路由地址是192.168.199.1的&lt;a href=&quot;http://www.xj123.info/4251.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;问题&lt;/a&gt;，但当时不知道。前天晚上又重新搞了一下，基本是搞定了。&lt;/p&gt;
&lt;p&gt;可能你需用用到的一些工具和文件，我提供在此，每个文件后面的注释中有注明出处，感谢各位。&lt;br&gt;点&lt;a href=&quot;http://pan.baidu.com/s/1w3sBD&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这儿&lt;/a&gt;下载,百度网盘。&lt;br&gt;&amp;gt;&lt;br&gt;File1: HiWiFi_OpenWrt.zip //极路由论坛上的官方人员提供的OpenWRT固件 &lt;a href=&quot;http://bbs.hiwifi.com/thread-7710-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File2: 小极修砖工具.rar //极路由论坛上的官方人员提供的修复工具 出处同上&lt;br&gt;File3: recovery.bin //巢鹏编译好的固件 &lt;a href=&quot;http://chaopeng.me/blog/2013/10/28/hiwifi.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File4: gevent_1.0rc2-1_ar71xx.ipk //适用于ar71xx平台已编译好的gevent &lt;a href=&quot;http://www.right.com.cn/forum/thread-121599-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File5: python-greenlet_0.4.0-1_ar71xx.ipk //处理多线程 出处同上&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+&lt;/p&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;p&gt;##编译Hiwifi的OpenWRT固件&lt;br&gt;上一次尝试刷的时候，我是自己编译的，但编译时间比较长，这次我是直接使用的是巢鹏编译好的固件，也就是&lt;em&gt;File3&lt;/em&gt;: recovery.bin，如果你适用这个文件的话，可以直接跳到刷机步骤&lt;br&gt;以下编译方法都是从&lt;a href=&quot;http://bbs.hiwifi.com/thread-7475-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;carabob&lt;/a&gt;，&lt;a href=&quot;http://chaopeng.me/blog/2013/10/28/hiwifi.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;巢鹏&lt;/a&gt;，&lt;a href=&quot;http://blog.omitol.com/openwrt-for-hiwifi/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hacker007&lt;/a&gt;等人那抄过来的，我就是做个记录。&lt;/p&gt;
&lt;p&gt;###环境准备&lt;br&gt;理论上有个Linux就可以了，但推荐用Ubuntu 12.04+，再安装subversion、git和build-essential等&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo apt-get install build-essential
sudo apt-get install subversion git
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###获取源码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;svn co https://code.hiwifi.com/svn/hiwifi
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;遇到提示输入密码时，直接打回车，然后出来输入用户名的提示，输入极客社区帐号email，再输入密码。&lt;/p&gt;
&lt;p&gt;###编译&lt;br&gt;    cd hiwifi/trunk&lt;br&gt;    ./scripts/feeds update -a&lt;br&gt;    ./scripts/feeds install -a&lt;br&gt;    make package/symlinks&lt;br&gt;使用默认的编译选项&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make HC6361_defconfig
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;也可以自定义编译选项&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make menuconfig
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;可以把openssh、python、pythonopenssl、unbound等，都配置进去。&lt;/p&gt;
&lt;p&gt;最后：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make -j4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果出错，要查看详细的编译信息可以使用V=s参数:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make -j4 V=s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;开始漫长的编译。&lt;/p&gt;
&lt;p&gt;###制作成recovery.bin&lt;br&gt;    wget -O rom.bin &lt;a href=&quot;http://updaterom.ikcd.net/upgrade_file/HC6361-0.775.784s_130802-131633-96d56f0c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://updaterom.ikcd.net/upgrade_file/HC6361-0.775.784s_130802-131633-96d56f0c&lt;/a&gt;&lt;br&gt;    dd if=rom.bin of=uboot.bin bs=1k count=128&lt;br&gt;    cat uboot.bin bin/ar71xx/openwrt-ar71xx-generic-tw150v1-squashfs-sysupgrade.bin &amp;gt;recovery.bin&lt;br&gt;如果运行第一条命令时，上面的链接404，暂时的解决方法是跳过wget，手动下载官方的一个&lt;a href=&quot;http://bbs.hiwifi.com/thread-7710-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;recovery.bin&lt;/a&gt;,也可以解压&lt;em&gt;File1&lt;/em&gt;： HiWiFi_OpenWrt.zip得到，重命名为rom.bin然后执行下面的命令提取uboot.bin。&lt;/p&gt;
&lt;p&gt;###刷机&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;解压&lt;em&gt;File1&lt;/em&gt;： HiWiFi_OpenWrt.zip后的文件夹里有tftpd程序(.exe)，将上一步生成的recovery.bin文件放入tftpd程序所在目录，替换掉原来的recovery.bin&lt;ol&gt;
&lt;li&gt;用网线将极路由 LAN 口与电脑网口相连&lt;/li&gt;
&lt;li&gt;将电脑网络接口 IP 设置为 192.168.1.88/255.255.255.0，如果不行的话就设置成192.168.199.88/255.255.255.0，具体我忘了。&lt;/li&gt;
&lt;li&gt;电脑上运行tftp程序，断开极路由电源，用尖锐物按住极路由 RESET 不放，再接上极路由电源&lt;/li&gt;
&lt;li&gt;等待电脑上 tftpd 出现传输 recovery.bin 进度条完成后，松开 RESET&lt;/li&gt;
&lt;li&gt;极路由面板灯进入跑马灯状态，跑完后，系统自动重启，刷机完成&lt;/li&gt;
&lt;li&gt;如果刷机失败的话，用我压缩包里的小极修砖工具进行修复，具体方法看&lt;a href=&quot;http://bbs.hiwifi.com/thread-7492-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;##OpenWRT配置&lt;br&gt;这部分内容来自&lt;a href=&quot;https://gist.github.com/ninehills/2627163&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ninehills&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;###初始配置&lt;br&gt;&lt;a href=&quot;http://wiki.openwrt.org/zh-cn/doc/howto/firstlogin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;第一次登陆&lt;/a&gt;OpenWRT路由器需要用telnet登陆你的路由，Windows下可能需要&lt;a href=&quot;https://www.google.com.hk/search?q=windows+telnet&amp;amp;oq=windows+telnet&amp;amp;aqs=chrome..69i57j69i65l3j69i60j69i61.3599j0j7&amp;amp;bmbp=1&amp;amp;sourceid=chrome&amp;amp;espvd=215&amp;amp;es_sm=93&amp;amp;ie=UTF-8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;安装&lt;/a&gt;一下telnet，可以在cmd下试一下&lt;br&gt;然后将路由器的Lan口和你电脑相连，电脑上设置为DHCP模式（如果不行的话，就按刚才刷机中的第3步配置）。然后 &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;telent 192.168.199.1  //此处极路由应是192.168.199.1，其他大部分路由应是192.168.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;成功后出现OpenWrt的欢迎界面类似这样：&lt;/p&gt;
&lt;figure class=&quot;highlight gherkin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;BusyBox v1.17.3 (2011-02-22 23:42:42 CET) built-in shell (ash)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Enter &#39;help&#39; for a list of built-in commands.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  _______                     ________        __&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; |&lt;span class=&quot;string&quot;&gt;       &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;.-----.-----.-----.&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;.----.&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|_&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; |&lt;span class=&quot;string&quot;&gt;   -   &lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;  _  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  -__&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;     &lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;   _&lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;   _&lt;/span&gt;|&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; |&lt;span class=&quot;string&quot;&gt;_______&lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;   __&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;_____&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;__&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;__&lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;________&lt;/span&gt;||&lt;span class=&quot;string&quot;&gt;__&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;  &lt;/span&gt;|&lt;span class=&quot;string&quot;&gt;____&lt;/span&gt;|&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;          |&lt;span class=&quot;string&quot;&gt;__&lt;/span&gt;|&lt;span class=&quot;string&quot;&gt; W I R E L E S S   F R E E D O M&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; ATTITUDE ADJUSTMENT (bleeding edge, r26290) ----------&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Vodka      Pour all ingredents into mixing&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Gin        tin with ice, strain into glass.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Amaretto&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Triple sec&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Peach schnapps&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1/4 oz Sour mix&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  * 1 splash Cranberry juice&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; -----------------------------------------------------&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root@openwrt:~$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后更改root密码：&lt;/p&gt;
&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@openwrt:&lt;/span&gt;~$ passwd root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Changing password for root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;New &lt;span class=&quot;attribute&quot;&gt;password&lt;/span&gt;:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Retype &lt;span class=&quot;attribute&quot;&gt;password&lt;/span&gt;:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Password for root changed by root&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;root&lt;span class=&quot;variable&quot;&gt;@openwrt&lt;/span&gt;:~$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;更改root密码后dropbear(SSH 服务)就运行了，输入&lt;code&gt;exit&lt;/code&gt;退出telent，然后&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh root@192.168.199.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;以后就可以通过ssh管理OpenWrt.&lt;/p&gt;
&lt;p&gt;###网络配置&lt;br&gt;LuCI是OpenWrt的web管理界面（Web UI），如果你编译固件时没有将LuCI配置进去的话，你就需要先在命令行下完成一定的网络配置，你当然也可以一直用命令行，而不安装LuCI&lt;br&gt;首先备份相关配置，防止出错：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /etc/config ~/ -r
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后用vi修改相关配置。 首先修改&lt;code&gt;/etc/config/wireless&lt;/code&gt;文件，注释掉&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# option disabled 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;配置文件中，在一行语句的前面加&lt;code&gt;#&lt;/code&gt;来注释这行语句，使该语句作用失效&lt;br&gt;然后修改&lt;code&gt;/etc/config/network&lt;/code&gt;文件，首先修改&lt;em&gt;lan&lt;/em&gt;接口配置，注释掉此行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# option ifname &amp;apos;eth0&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后增加&lt;em&gt;wan&lt;/em&gt;接口，如果你上级网络是DHCP的，则文件的末尾添加：&lt;br&gt;&lt;figure class=&quot;highlight vbnet&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;config &lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&#39;wan&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; ifname &lt;span class=&quot;comment&quot;&gt;&#39;eth0&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; proto &lt;span class=&quot;comment&quot;&gt;&#39;dhcp&#39;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你上级网络是静态IP，则在文件的末尾添加类似如下的语句：&lt;br&gt;&lt;figure class=&quot;highlight vbnet&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;config &lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;&#39;wan&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; ifname &lt;span class=&quot;comment&quot;&gt;&#39;eth0&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; proto &lt;span class=&quot;comment&quot;&gt;&#39;static&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; ipaddr &lt;span class=&quot;comment&quot;&gt;&#39;10.22.33.124&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; netmask &lt;span class=&quot;comment&quot;&gt;&#39;255.255.255.0&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; gateway &lt;span class=&quot;comment&quot;&gt;&#39;10.22.33.1&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;option&lt;/span&gt; dns &lt;span class=&quot;comment&quot;&gt;&#39;202.113.16.10&#39;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后将路由器的Lan/Wan口接到上级网络中，重启路由器。这时便可以通过电脑寻找SSID为 &lt;em&gt;OpenWrt&lt;/em&gt;的无线网络，加入后便可以通过：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh root@192.168.199.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;来连接路由器。此时路由也工作在路由模式下，可以正常上网了。&lt;br&gt;无线网络的加密需要修改&lt;code&gt;/etc/config/wireless&lt;/code&gt;文件，配置wpa加密需要修改&lt;code&gt;config wifi-iface&lt;/code&gt;段&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;option ssid OpenWrt
option encryption psk2
option key        &amp;apos;secret passphrase&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;###安装软件&lt;br&gt;OpenWrt上安装软件需要用opkg包管理系统，主要命令：&lt;br&gt;&lt;figure class=&quot;highlight dsconfig&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看帮助&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;opkg &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;help&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更新数据库，必做&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;opkg &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;update&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 列出已安装的包&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;opkg &lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;list-installed&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装LuCI&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;opkg &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;install &lt;/span&gt;&lt;span class=&quot;string&quot;&gt;luci&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更多 参见 http://wiki.openwrt.org/doc/howto/luci.essentials&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你也用的是巢鹏编译好的固件的话，你可能也会在&lt;code&gt;opkg update&lt;/code&gt;时，出现&lt;code&gt;HTTP&lt;/code&gt;错误，这是更新源链接无效的问题，可以修改&lt;code&gt;/etc/opkg.conf&lt;/code&gt;这个文件，把下面这行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;src/gz attitude_adjustment http://xxxx.whatever.xxx/yyy/zzz dest root / dest ram /tmp lists_dir ext /var/opkg-lists option overlay_root /overlay
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;中的这个链接改成&lt;code&gt;http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/&lt;/code&gt;，其他部分不用变动&lt;/p&gt;
&lt;p&gt;##安装goagent&lt;br&gt;这部分前提是你已经会使用goagent了&lt;br&gt;这部分内容参考&lt;a href=&quot;http://www.openwrt.org.cn/bbs/forum.php?mod=viewthread&amp;amp;tid=14500&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;，感谢网友mw4530r&lt;/p&gt;
&lt;p&gt;###安装python等&lt;br&gt;安装python的时间可能稍长&lt;br&gt;&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opkg &lt;span class=&quot;keyword&quot;&gt;update&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# 安装 &lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opkg install &lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# 安装 pyopenssl &lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;-openssl libopenssl libevent2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opkg install pyopenssl &lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;-openssl libopenssl libevent2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;###把goagent传至路由器&lt;br&gt;下载GoAgent, 解压文件到电脑上&lt;br&gt;修改GoAgent的local文件夹里的proxy.ini文件&lt;/p&gt;
&lt;p&gt;将GoAgent 监听 ip改成0.0.0.0&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[listen]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;ip&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;port&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;8087&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;将appid改成我之前已经在Google App Engine 部署好的appid, 多个appid用“|”分隔&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[gae]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;appid&lt;/span&gt; = idone|idtwo|idthree&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另外，将PAC设定 &lt;code&gt;enable = 0&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight ini&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;section&quot;&gt;[pac]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;enable&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;修改GoAgent的local文件夹里的proxy.pac文件，把里面的127.0.0.1:8087全部替换成路由器的内网IP，如 192.168.199.1:8087&lt;br&gt;创建目录/app/goagent/local/certs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /app/goagent/local/certs
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;把GoAgent的local文件夹里的 certs目录, proxy.py, 及被更改过的 proxy.ini 复制到路由器/app/goagent/local目录下，将被更改过的 proxy.pac 复制到路由器/www目录下&lt;br&gt;&lt;figure class=&quot;highlight elixir&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;scp goagent_dir/local/certs/* root&lt;span class=&quot;variable&quot;&gt;@192&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;168.199&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:/app/goagent/local/certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;scp goagent_dir/local/proxy.py root&lt;span class=&quot;variable&quot;&gt;@192&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;168.199&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:/app/goagent/local&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;scp goagent_dir/local/proxy.pac root&lt;span class=&quot;variable&quot;&gt;@192&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;168.199&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:/www&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;###安装gevent&lt;br&gt;gevent可以让goagent稳定运行，gevent可以自己编译，或者直接使用现成的&lt;code&gt;gevent_1.0rc2-1_ar71xx.ipk&lt;/code&gt;,&lt;code&gt;python-greenlet_0.4.0-1_ar71xx.ipk&lt;/code&gt;，注意只有&lt;em&gt;ar71xx平台&lt;/em&gt;可以使用，bcm等其他平台还是要自己编译。同过跟上面类似的scp命令，上传至路由器，比如上传到&lt;code&gt;/tmp&lt;/code&gt;目下，进行安装：&lt;br&gt;&lt;figure class=&quot;highlight lsl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;opkg install /tmp/python-greenlet_0&lt;span class=&quot;number&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;_ar71xx.ipk&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;opkg install /tmp/gevent_1&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt;rc2&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;_ar71xx.ipk&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;###运行goagent&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;python /app/goagent/local/proxy.py
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这时在连了该路由器的电脑上使用如下代理，就可以至少访问&lt;a href=&quot;http://www.nytimes.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Newyork Times&lt;/a&gt;这类非&lt;code&gt;https&lt;/code&gt;链接的网站了，访问&lt;code&gt;https&lt;/code&gt;网站，你还需要导入GoAgent证书&lt;br&gt;&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;HTTP &lt;span class=&quot;string&quot;&gt;proxy:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;http:&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//192.168.199.1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;Port:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;8087&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;###GoAgent证书导入&lt;br&gt;注: 我目前使用的是GoAgent 3.1.0，在导入了证书以后，用iOS 上的Safari访问Twitter还是不行，访问Facebook和Youtube却没问题，我也看到很多和我一样的情况，后期应该会有修复吧&lt;/p&gt;
&lt;p&gt;Windows和Linux应该分别用管理员和root权限在本地运行一下GoAgent就可以到导入GoAgent证书了，不行的话，这样操作：&lt;br&gt;Windows下Chrome中&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;设置-&amp;gt;显示高级设置-&amp;gt;HTTPS/SSL-&amp;gt;管理证书-&amp;gt;受信任的根证书颁发机构-&amp;gt;导入-&amp;gt;下一步,浏览-&amp;gt;local\CA.crt-&amp;gt;下一步-&amp;gt;将所有的证书都放入下列存储-&amp;gt;受信任的根证书颁发机构-&amp;gt;下一步,完成&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Linux下Chrome中&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;设置-&amp;gt;显示高级设置-&amp;gt;HTTPS/SSL-&amp;gt;管理证书-&amp;gt;授权中心-&amp;gt;导入-&amp;gt;下一步,浏览-&amp;gt;local\CA.crt-&amp;gt;把复选框都选中-&amp;gt;确定&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Firefox中，&lt;em&gt;我不知道，你可以Google的嘛&lt;/em&gt;&lt;br&gt;iOS平台，通过sarari访问 &lt;a href=&quot;https://goagent.googlecode.com/files/CA.crt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://goagent.googlecode.com/files/CA.crt&lt;/a&gt;这里，然后安装，你也可以吧&lt;code&gt;CA.crt&lt;/code&gt;通过邮件的方式发给自己，但你需要用iOS自带的邮件应用打开附件。&lt;/p&gt;
&lt;p&gt;###使用PAC文件作为自动代理设置&lt;br&gt;如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://192.168.199.1/proxy.pac
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;注意：&lt;code&gt;http://192.168.199.1&lt;/code&gt;后面不需要接端口。除非你的&lt;code&gt;proxy.ini&lt;/code&gt;中的pac是enable的&lt;br&gt;iOS平台下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Settings -&amp;gt; Wi-Fi -&amp;gt; CurrentWiFi -&amp;gt; HTTP Proxy -&amp;gt; Auto -&amp;gt; &lt;a href=&quot;http://192.168.199.1/proxy.pac&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://192.168.199.1/proxy.pac&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;###开机启动GoAgent&lt;br&gt;修改&lt;code&gt;/etc/rc.local&lt;/code&gt;，在&lt;code&gt;exit 0&lt;/code&gt;之前增加以下命令&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;python /app/goagent/local/proxy.py &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;-EOF-&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;买了个极路由，外观什么的确实挺酷，管理界面也比较友好，但所谓的App Store加速什么的，我真的完全没体会到，而且我的笔记本连上后，隔一段时间就会掉。所以就准备刷个OpenWRT，而且还可以用用goagent，之前尝试过一次，刷机应该是成功了，但telnet的时候一直连不上，应该是因为极路由地址是192.168.199.1的&lt;a href=&quot;http://www.xj123.info/4251.html&quot;&gt;问题&lt;/a&gt;，但当时不知道。前天晚上又重新搞了一下，基本是搞定了。&lt;/p&gt;
&lt;p&gt;可能你需用用到的一些工具和文件，我提供在此，每个文件后面的注释中有注明出处，感谢各位。&lt;br&gt;点&lt;a href=&quot;http://pan.baidu.com/s/1w3sBD&quot;&gt;这儿&lt;/a&gt;下载,百度网盘。&lt;br&gt;&amp;gt;&lt;br&gt;File1: HiWiFi_OpenWrt.zip //极路由论坛上的官方人员提供的OpenWRT固件 &lt;a href=&quot;http://bbs.hiwifi.com/thread-7710-1-1.html&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File2: 小极修砖工具.rar //极路由论坛上的官方人员提供的修复工具 出处同上&lt;br&gt;File3: recovery.bin //巢鹏编译好的固件 &lt;a href=&quot;http://chaopeng.me/blog/2013/10/28/hiwifi.html&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File4: gevent_1.0rc2-1_ar71xx.ipk //适用于ar71xx平台已编译好的gevent &lt;a href=&quot;http://www.right.com.cn/forum/thread-121599-1-1.html&quot;&gt;出处&lt;/a&gt;&lt;br&gt;File5: python-greenlet_0.4.0-1_ar71xx.ipk //处理多线程 出处同上&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Learn HTML &amp; CSS in one easy to use guide</title>
    <link href="http://blog.hanhaishan.com/2013/learn_htmlcss_beginner/"/>
    <id>http://blog.hanhaishan.com/2013/learn_htmlcss_beginner/</id>
    <published>2013-11-12T13:14:05.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;link:  &lt;a href=&quot;http://learn.shayhowe.com/html-css/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://learn.shayhowe.com/html-css/&lt;/a&gt;&lt;br&gt;对于我这种Beginner来说，这真的是个绝佳好教程啊&lt;br&gt;作者是&lt;a href=&quot;http://www.shayhowe.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Shay Howe&lt;/a&gt;&lt;br&gt;Advanced进阶版看&lt;a href=&quot;http://learn.shayhowe.com/advanced-html-css/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;link:  &lt;a href=&quot;http://learn.shayhowe.com/html-css/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://learn.shayhowe.com/html-css/&lt;/a&gt;&lt;br&gt;对于我这种Begin
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>福特面试小记</title>
    <link href="http://blog.hanhaishan.com/2014/ford_interview_2014/"/>
    <id>http://blog.hanhaishan.com/2014/ford_interview_2014/</id>
    <published>2013-11-09T13:03:20.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;到今天为止大小公司已经面试了很多家，昨天参加的福特的面试让我印象深刻，是以记。&lt;/p&gt;
&lt;p&gt;福特的简历是在很早之前投的，在51job上查看我的简历编号竟然是60，可见我投递之早。我投的是IT岗位，笔试是在10月24日进行的，第一题是一个大概有五百字左右的文章翻译，文章内容是关于福特福克斯车型的销售表现，报道性质。翻译起来并不难，但我觉得有点多，翻译了大半以后，我便开始做后面的题了。后面的题都是英文选择题，智力题推理题都很简单，基本考的还是英文阅读，只要你能看懂题目，一般题目都能做对。做完后面的题后，时间也基本没有了，所以那个翻译题，我终究没有做完。还好在31日，还是收到福特的Invitation to Ford Graduates Selection Event Day的邮件，同去的同个实验室的周峰也收到了。&lt;/p&gt;
&lt;p&gt;面试的地点安排在金茂大厦的一个酒店，金茂就是被戏称为注射器的目前上海第二高楼，地点的选择也能看出来福特对这次校园招聘也很重视。注册时间安排在8点和8:30之间，而我们学校的位置在宝山区，于是我们只能早上6点多点就得起来。前一天喝了很多咖啡，加上平时本来就睡得晚，导致凌晨2点才睡着，于是我才睡了4个小时。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;到达面试地点注册后，会领取到印有自己姓名拼音的贴纸，需要贴在衣服上醒目的位置，可以让面试官在Group Discussion的时候知道你是谁。今天参加面试的除了应聘IT的外，还有应聘HR和制造的，福特在会场中总共安排了二十多个桌子，每个桌子安排了7个左右的应聘者，每桌会有两个来自福特的评价人。等我和周峰进去之后，发现我们是现场唯二的没有装正装的人==| 。我和周峰巧合的被分在了同一桌，由于是Group Discussion，肯定会淘汰一定的人数，所以这并不是什么好事。上次在笔试完后，坐地铁回去的时候遇到的交大才子Lin ZHOU竟然也在我们这桌。我们这桌应该有一两人没来，最终只坐了五个应聘者，另两位中一位是同济计算机专业的Yunhao XU，另一位竟然是我和周峰同校同学院的学妹Xuerui ZHU，何等的缘分啊:)，我们这桌还挺有意思。大家很快就欢乐的聊了起来。8:30左右，每个桌子的评价人便都开始就坐了，我们桌的两位一位是来自德国的女士，她自我介绍的时候没听清她的名字，但好像说她在福特已经工作4年了，另一位是中国的J.F.，两个人都非常的友好。在Group Discussion之前先是有对今天agenda的介绍，之后的福特亚太地区的HR高管讲话。面试正式开始后，德国女士问了每一个人一个问题，每个问题都不一样，每个人两分钟来回答。问题大概是这些 &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What Ford means to you?&lt;br&gt;Where is your hometown and discribe it.&lt;br&gt;Tell us about your experience of hunting job till now?&lt;br&gt;Tell us about your major. And how about that industry?&lt;br&gt;Tell us about your personality.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;第四个就是问我的问题，我回答的并不是很好。回答完问题后，就进入真正的Group Discussion环节，J.F.先介绍了规则，25分钟讨论，之后选一人进行5分钟总结。讨论时可以用中文，总结必须用英文。我们在讨论的时候，两位评价人不会参与，也不会说话，只会观察我们。给定的Case的中文意思大概是这样的&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;背景：位于重庆的长安福特需要生产新型的SUV&lt;br&gt;问题1：为了保证大批量生产，有哪些business process和key point需要注意，列出5点，并给出理由。&lt;br&gt;问题2：为了保证大批量生产，IT系统中要哪些关键的地方需要考虑，列出5点，并给出理由&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在讨论的过程中，我在写字板上写字的时候，竟然紧张地单词都不会写，research这个单词竟然写错了，还好及时跟正。&lt;br&gt;我觉得我们讨论的还是比较乱的。Lin各种活跃。Xuerui的口语超好，后来知道她参加过我们学校的海外实习，在波兰实习了三个月。Yunhao，周峰还有我，我们三人说的比较少点。5分钟的总结我们也直接让口语最好的Xuerui来说，但由于我们讨论的并不充分，Xuerui有点像是被我们推向火坑的感觉，哈哈，不过她临场的表现真的特别好。&lt;/p&gt;
&lt;p&gt;这个环节结束后，两位评价人需要离场讨论，来决定我们五人的去留，我们几个便又聊了一会。之后每人会拿到一个信封，每个信封都装有每个人去留的信息。最后是Xuerui，Yunhao还有我进了下一轮的Panel Interview，周峰和Lin被淘汰，Lin没能进下一轮都让我们比较意外，当然所有人的信封里都有餐券。在吃饭之前，进入Panel Interview的还有去参加一个Life @Ford的环节，是由上海这边的一个HR经理主持，主要是给我们介绍在福特工作是怎样的，让大家匿名写申请福特的一个理由，邀请现场的几个员工讲了讲为什么喜欢福特等。结束后我们便去吃饭，下午1:30才会开始Panel Interview，中间也就大家聊聊天。&lt;/p&gt;
&lt;p&gt;Panel Interview我被安排在Table 24的第一个，Xuerui和Yunhao都被分在其他桌的第二个。由于当时安排上的失误，Table 24的面试官好像一直没有拿到评分材料，所以我相比其他桌的人要晚10分钟左右才开始面试的，这10分钟的时间里，负责带我入场的工作人员也一直在陪我聊天，应该是怕我紧张吧。我的面试官是Jeff和William，两人都非常的友好。我坐下后，William便让我自己我介绍一下，我问了是中文还是英文后，告知最好用英文。面试官手中个表格，上面罗列有应该要问的问题，William和Jeff偶尔也会相互商议一下 哪些问题需要问 哪些不需要问。我主要被问到的问题大概有，为什么选择福特，你对福特有什么了解，为什么学的是通信专业要应聘投福特的IT，你觉得汽车行业在中国的前景如何。后面让我描述做的项目中遇到的难题，以及我是如何解决的。类似的问题在面试过程中被提及了好几次，对问题的分析能力以及解决能力应该是福特最看重的吧。其实对于这样的问题，我在别的面试中也被问到过几次了，但每次也都回答的不好。在这次的回答中，我提到了我给这个blog修改模板的事，让我惊讶的是，在又回答了一两个问题后William通过手机访问了我的blog，并拿给我看，让我具体跟他说我修改模板的事。William认真的态度让人佩服。后面一两个问题，我在用英文结巴的回答了两句后，直接就用中文回答了，当提到遇到问题需要人帮忙的时候，他们就会追问我是如何让人帮忙的。后面问到几个关于Teamwork和Building Relationship的问题。最后当让我问他们问题的时候，我问了福特特定车型只会在特定的地区销售是基于哪些因素考虑的，还有福特的IT具体要做的事。William和Jeff都回答了我的问题，而且Jeff回答的特别细节 特别认真。我大概面了有1个小时左右，有很多关键问题回答的不好。&lt;/p&gt;
&lt;p&gt;关于这次面试，最让我印象深刻的是，福特的所有工作人员都相当的重视本次的校招，而且每个人都非常的积极和认真，作为一个应聘人员，也能很享受这样的过程。感谢J.F.，德国女士，William和Jeff，感谢福特提供的机会。&lt;/p&gt;
&lt;p&gt;–&lt;br&gt;写这篇文章的时候，也同时看了广州恒大对阵首尔FC的亚冠决赛。祝贺恒大。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;到今天为止大小公司已经面试了很多家，昨天参加的福特的面试让我印象深刻，是以记。&lt;/p&gt;
&lt;p&gt;福特的简历是在很早之前投的，在51job上查看我的简历编号竟然是60，可见我投递之早。我投的是IT岗位，笔试是在10月24日进行的，第一题是一个大概有五百字左右的文章翻译，文章内容是关于福特福克斯车型的销售表现，报道性质。翻译起来并不难，但我觉得有点多，翻译了大半以后，我便开始做后面的题了。后面的题都是英文选择题，智力题推理题都很简单，基本考的还是英文阅读，只要你能看懂题目，一般题目都能做对。做完后面的题后，时间也基本没有了，所以那个翻译题，我终究没有做完。还好在31日，还是收到福特的Invitation to Ford Graduates Selection Event Day的邮件，同去的同个实验室的周峰也收到了。&lt;/p&gt;
&lt;p&gt;面试的地点安排在金茂大厦的一个酒店，金茂就是被戏称为注射器的目前上海第二高楼，地点的选择也能看出来福特对这次校园招聘也很重视。注册时间安排在8点和8:30之间，而我们学校的位置在宝山区，于是我们只能早上6点多点就得起来。前一天喝了很多咖啡，加上平时本来就睡得晚，导致凌晨2点才睡着，于是我才睡了4个小时。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Deep C and C++</title>
    <link href="http://blog.hanhaishan.com/2013/Deep_C/"/>
    <id>http://blog.hanhaishan.com/2013/Deep_C/</id>
    <published>2013-10-25T11:45:16.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;link: &lt;a href=&quot;http://www.slideshare.net/olvemaudal/deep-c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.slideshare.net/olvemaudal/deep-c&lt;/a&gt;&lt;br&gt;从&lt;a href=&quot;http://weibo.com/developerworks&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;@developerWorks&lt;/a&gt;的&lt;a href=&quot;http://weibo.com/fav?leftnav=1&amp;amp;wvr=5#1382701367744&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;微博&lt;/a&gt;那里看到，这个幻灯片，讲的挺简单，挺好。&lt;br&gt;Olve Maudal 和 Jon Jagger是该幻灯片的两位作者。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.pvv.org/~oma/DeepC_slides_oct2012.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF下载&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.slideshare.net/olvemaudal/deep-c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;slideshare&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;link: &lt;a href=&quot;http://www.slideshare.net/olvemaudal/deep-c&quot;&gt;http://www.slideshare.net/olvemaudal/deep-c&lt;/a&gt;&lt;br&gt;从&lt;a href=&quot;http://weibo.com/developerworks&quot;&gt;@developerWorks&lt;/a&gt;的&lt;a href=&quot;http://weibo.com/fav?leftnav=1&amp;amp;wvr=5#1382701367744&quot;&gt;微博&lt;/a&gt;那里看到，这个幻灯片，讲的挺简单，挺好。&lt;br&gt;Olve Maudal 和 Jon Jagger是该幻灯片的两位作者。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.pvv.org/~oma/DeepC_slides_oct2012.pdf&quot;&gt;PDF下载&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.slideshare.net/olvemaudal/deep-c&quot;&gt;slideshare&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>iOS 7</title>
    <link href="http://blog.hanhaishan.com/2013/iOS_7/"/>
    <id>http://blog.hanhaishan.com/2013/iOS_7/</id>
    <published>2013-10-12T11:06:28.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;Android 4+ 很棒，但因为iOS 7的吸引，我现在用起了iOS。&lt;br&gt;其实我不care什么扁平化还是拟物化，这两者都能做出漂亮的系统。从iOS 4以及其后的各个版本的iOS系统也都用过，从iOS 6到iOS 7有种说不出的感觉，界面上是翻天覆地的变化，但iOS的精髓却得到了很好的继承。很多人觉得iOS 7很丑，Camera, Settings, Safari那些个icon都丑爆了。首先我并不觉得这几个icon丑，而且我也觉得，只是从几个图标上来判断整个系统也太片面了。&lt;br&gt;iOS 7的锁屏与之前相比有很大的变化，结算不再只是拖动滑块，而是整个屏幕，时间区域也没有了原来的深色背景叠加。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201310/screenshot1.jpg&quot; alt=&quot;screenshot1&quot;&gt;&lt;/p&gt;
&lt;p&gt;我最喜欢的其实是密码解锁界面，背景呈现高度的高斯模糊效果(系统中很多地方都是这样的效果)并降低至较低的亮度，数字按钮的外圈会根据背景图片的不同而呈现不同的光泽，但并不是简单的透明。忍不住截了很多张图。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt; 
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201310/screenshot2.jpg&quot; alt=&quot;screenshot2&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201310/screenshot3.jpg&quot; alt=&quot;screenshot3&quot;&gt;&lt;/p&gt;
&lt;p&gt;数字按钮在按下的时候，颜色也会很和谐。&lt;/p&gt;
&lt;p&gt;SpringBoard主界面，播放音乐时的锁屏界面，Notification Center和Control Center是这样子的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201310/screenshot4.jpg&quot; alt=&quot;screenshot4&quot;&gt;&lt;/p&gt;
&lt;p&gt;iOS 7也有很多隐藏的小技巧，比如在短信&lt;strong&gt;会话&lt;/strong&gt;界面，逐条短信的收发时间是隐藏的（在某个时间段内的短信会话中，第一条短信的时间是显示的），向左滑动可以看到每条信息的收发时间，松开手指又会弹回。比如在Sarari中的书签按钮中还有个 Shared Links，先显示你iOS中绑定的社交网络（Twitter，新浪微博等）中你关注的用户提及的网址。更多的去看The Verge的文章&lt;a href=&quot;http://www.theverge.com/2013/9/18/4741412/the-best-hidden-features-in-ios-7&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The best hidden features in iOS 7&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;–&lt;br&gt;最近在玩微信中的节奏大师，虽然这游戏的设计以及其中音乐的节奏打击点没&lt;a href=&quot;https://itunes.apple.com/cn/app/tap-tap-revenge-4/id405373266?mt=8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Tap Tap Revenge&lt;/a&gt;和&lt;a href=&quot;https://itunes.apple.com/us/app/guitar-hero/id374801345?mt=8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Guitar Hero&lt;/a&gt;中那么精良，而且难度和要求也低多了，但一步一步闯关还是挺好玩的。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Android 4+ 很棒，但因为iOS 7的吸引，我现在用起了iOS。&lt;br&gt;其实我不care什么扁平化还是拟物化，这两者都能做出漂亮的系统。从iOS 4以及其后的各个版本的iOS系统也都用过，从iOS 6到iOS 7有种说不出的感觉，界面上是翻天覆地的变化，但iOS的精髓却得到了很好的继承。很多人觉得iOS 7很丑，Camera, Settings, Safari那些个icon都丑爆了。首先我并不觉得这几个icon丑，而且我也觉得，只是从几个图标上来判断整个系统也太片面了。&lt;br&gt;iOS 7的锁屏与之前相比有很大的变化，结算不再只是拖动滑块，而是整个屏幕，时间区域也没有了原来的深色背景叠加。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201310/screenshot1.jpg&quot; alt=&quot;screenshot1&quot;&gt;&lt;/p&gt;
&lt;p&gt;我最喜欢的其实是密码解锁界面，背景呈现高度的高斯模糊效果(系统中很多地方都是这样的效果)并降低至较低的亮度，数字按钮的外圈会根据背景图片的不同而呈现不同的光泽，但并不是简单的透明。忍不住截了很多张图。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>用LaTex来写简历</title>
    <link href="http://blog.hanhaishan.com/2013/writing-your-own-cv-using-latex/"/>
    <id>http://blog.hanhaishan.com/2013/writing-your-own-cv-using-latex/</id>
    <published>2013-09-11T10:41:09.000Z</published>
    <updated>2016-07-10T15:12:01.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201309/cv_xiaolong.PNG&quot; alt=&quot;cv_xiaolong&quot;&gt;&lt;/p&gt;
&lt;p&gt;嗯，又到了找工作的季节了。&lt;br&gt;用M$ Word写出的简历是不是没那么酷[^1]，那或许你可以试试用&lt;a href=&quot;http://www.latex-project.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LaTex&lt;/a&gt;来写简历，开源，免费，效果棒。&lt;br&gt;&lt;a href=&quot;http://www.ctan.org/pkg/moderncv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;moderncv&lt;/a&gt;类是一个超棒的LaTex简历模板，用moderncv作出的简历也非常的漂亮，看看图就知道了。&lt;/p&gt;
&lt;p&gt;接下来说说怎么做，你也可以参考&lt;a href=&quot;http://blog.sina.com.cn/s/blog_53da0ca70101bwd1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这篇&lt;/a&gt;文章。&lt;br&gt;其实之前很早在网上看到moderncv做的简历时，就被吸引了，然后自己尝试了做，完全不懂的情况下，走了不上弯路。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt; 
&lt;p&gt;首先你得有个LaTex环境，不同的系统各不相同，比如我用的是Arch Linux，那么就可以通过安装Tex Live来获得LaTex环境。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo pacman -S texlive-most
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上面的命令获得Tex Live应用&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo pacman -S texlive-lang
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;texlive-lang 提供个性化的设置和非英语特性，所以也要安装。具体参见&lt;a href=&quot;https://wiki.archlinux.org/index.php/TeXLive_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;)。&lt;/p&gt;
&lt;p&gt;接下来就是下载moderncv包，可以到&lt;a href=&quot;http://www.ctan.org/tex-archive/macros/latex/contrib/moderncv&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;下载。包中的examples文件夹中也有几个用moderncv生成的pdf的例子，可以看一看。包中有个&lt;strong&gt;template-zh.tex&lt;/strong&gt;是中文cv的模板，但我想说的是&lt;strong&gt;不要用这个模板&lt;/strong&gt;，虽然可以用起来可能没问题，但如果想修改中文字体的话，会很麻烦。我之前就是用这个模板，耽误了很多时间。包中的&lt;strong&gt;template.tex&lt;/strong&gt;才是我们需要的模板文件。&lt;br&gt;我们先来玩一玩，用你最喜欢的编辑器打开这个模板，文件的下面部分是简历信息，你可以试着改改，然后运行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;xelatex template.tex
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果一些正常的话，同一目录下就会生成一个叫template.pdf的pdf文件，打开，你应该能看到你的改动，Oh yeah。&lt;/p&gt;
&lt;p&gt;接下来是样式的自定义（以”%”开始的语句在LaTex中是注释）&lt;/p&gt;
&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;%设置文档字体大小，纸张大小，字体族&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\&lt;span class=&quot;selector-tag&quot;&gt;documentclass&lt;/span&gt;&lt;span class=&quot;selector-attr&quot;&gt;[10pt,a4paper,sans]&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;moderncv&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;% 设置主题&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\&lt;span class=&quot;selector-tag&quot;&gt;moderncvstyle&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;classic&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;% 设置主题颜色&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\&lt;span class=&quot;selector-tag&quot;&gt;moderncvcolor&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;blue&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;renewcommand&lt;/span&gt;&amp;#123;\&lt;span class=&quot;selector-tag&quot;&gt;familydefault&lt;/span&gt;&amp;#125;&amp;#123;\&lt;span class=&quot;selector-tag&quot;&gt;sfdefault&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;nopagenumbers&lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;% 设置编码方式&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;selector-attr&quot;&gt;[utf8]&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;inputenc&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;usepackage&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;CJKutf8&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;% 调整页面边距&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;\&lt;span class=&quot;selector-tag&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;selector-attr&quot;&gt;[scale=0.75]&lt;/span&gt;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;geometry&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;setlength&lt;/span&gt;&amp;#123;\&lt;span class=&quot;selector-tag&quot;&gt;hintscolumnwidth&lt;/span&gt;&amp;#125;&amp;#123;&lt;span class=&quot;selector-tag&quot;&gt;3cm&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;%\&lt;span class=&quot;selector-tag&quot;&gt;setlength&lt;/span&gt;&amp;#123;\&lt;span class=&quot;selector-tag&quot;&gt;makecvtitlenamewidth&lt;/span&gt;&amp;#125;&amp;#123;10cm&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以上每一条语句在&lt;strong&gt;template.tex&lt;/strong&gt;中都有解释，也列出了可用参数，比如主题就有 classic, casual, oldstyle, banking 可以选择。中文的解释在&lt;strong&gt;template-zh.tex&lt;/strong&gt;中也能对应的上，可以参考一下(只是不要用这个文件作模板)。&lt;/p&gt;
&lt;p&gt;下面的设置对中文简历很重要。&lt;br&gt;&lt;figure class=&quot;highlight tex&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%中文字体设置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;fontspec&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;xunicode&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;usepackage&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;xeCJK&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%主字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setmainfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;Minion Pro&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%无衬线字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setsansfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;Myriad Pro&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%等宽字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setmonofont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;Meslo LG M&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%主要中文字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKmainfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;SimSun&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%无衬线中文字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKsansfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;KaiTi&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%等宽中文字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKmonofont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;SimHei&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%\setCJKmathfont&amp;#123;&amp;#125;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;现在你就可以随便写中文简历了。你也可以自定义中文字体，比如我，直接把所有中文字体都改成了 &lt;em&gt;文泉驿正黑&lt;/em&gt;。&lt;br&gt;&lt;figure class=&quot;highlight tex&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;%中文字体&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKmainfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;文泉驿正黑&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKsansfont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;文泉驿正黑&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;\&lt;span class=&quot;name&quot;&gt;setCJKmonofont&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&amp;#123;文泉驿正黑&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;个人信息的填写也都有解释，并不一定要按它的格式。&lt;/p&gt;
&lt;p&gt;–&lt;br&gt;话说，昨晚iPhone 5C和iPhone 5S都发布了，原来iPhone 5C根本不是廉价版，是为了替代iPhone 5。而且大陆和香港的差价好大啊。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// 2013/09/11 22:00 exchange rate
//iPhone 5C 16GB    
Price_diff = Price_cn - Price_hk = RMB4488 - HK$4688 ≈ RMB4488 - RMB3698.90741 = RMB789.09259
//iPhone 5S 64GB    
Price_diff = Price_cn - Price_hk = RMB6888 - HK$7188 ≈ RMB6888 - RMB5671.44762 = RMB1216.55238
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;擦~&lt;/p&gt;
&lt;p&gt;[^1]: 这里绝不是说用MS Word就写不出酷酷的简历 =.=&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://7fva40.com1.z0.glb.clouddn.com/201309/cv_xiaolong.PNG&quot; alt=&quot;cv_xiaolong&quot;&gt;&lt;/p&gt;
&lt;p&gt;嗯，又到了找工作的季节了。&lt;br&gt;用M$ Word写出的简历是不是没那么酷[^1]，那或许你可以试试用&lt;a href=&quot;http://www.latex-project.org/&quot;&gt;LaTex&lt;/a&gt;来写简历，开源，免费，效果棒。&lt;br&gt;&lt;a href=&quot;http://www.ctan.org/pkg/moderncv&quot;&gt;moderncv&lt;/a&gt;类是一个超棒的LaTex简历模板，用moderncv作出的简历也非常的漂亮，看看图就知道了。&lt;/p&gt;
&lt;p&gt;接下来说说怎么做，你也可以参考&lt;a href=&quot;http://blog.sina.com.cn/s/blog_53da0ca70101bwd1.html&quot;&gt;这篇&lt;/a&gt;文章。&lt;br&gt;其实之前很早在网上看到moderncv做的简历时，就被吸引了，然后自己尝试了做，完全不懂的情况下，走了不上弯路。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
